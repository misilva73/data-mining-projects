*------------------------------------------------------------*
User:                misil
Date:                24 December 2017
Time:                09:57:19 o'clock
Site:                70107571
Platform:            X64_10PRO
Maintenance Release: 9.04.01M4P110916
EM Version:          14.2
* 
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "24 December 2017" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "09:57:12 o'clock" );
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Training Log";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
*------------------------------------------------------------*
* Training Log
Date:                24 December 2017
Time:                09:57:12 o'clock
*------------------------------------------------------------*
MPRINT(EM_DIAGRAM):    filename O0SP1TVQ "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\EMTRAIN.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):   proc printto print=O0SP1TVQ new;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _LOG "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\EMLOG.log" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "24 December 2017" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "09:57:12 o'clock" );
MPRINT(EM_DIAGRAM):   file _LOG;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "User:                misil";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "Site:                70107571";
MPRINT(EM_DIAGRAM):   put "Platform:            X64_10PRO";
MPRINT(EM_DIAGRAM):   put "Maintenance Release: 9.04.01M4P110916";
MPRINT(EM_DIAGRAM):   put "EM Version:          14.2";
MPRINT(EM_DIAGRAM):   put "* ";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _LOGIN "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\EMTRAIN.log" encoding="UTF-8" NOBOM;
MPRINT(EM_COPYFILE):   data _null_;
MPRINT(EM_COPYFILE):   length line $20000;
MPRINT(EM_COPYFILE):   file _LOG MOD lrecl=20000;
MPRINT(EM_COPYFILE):   fid=fopen("_LOGIN",'i',20000,'v');
MPRINT(EM_COPYFILE):   if fid > 0 then do;
MPRINT(EM_COPYFILE):   do while(^fread(fid));
MPRINT(EM_COPYFILE):   rlen = frlen(fid);
MPRINT(EM_COPYFILE):   rc= fget(fid,line,20000);
MPRINT(EM_COPYFILE):   start = length(line)-length(left(line))+1;
MPRINT(EM_COPYFILE):   line=strip(line);
MPRINT(EM_COPYFILE):   put @start line;
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   if fid > 0 then rc=fclose(fid);
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   run;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _LOGIN;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   file _LOG mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   filename _LOGIN "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\EMSCORE.log" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   file _LOG mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _LOGIN "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\EMREPORT.log" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _LOGIN;
MPRINT(EM_DIAGRAM):    filename _LOG;
MPRINT(EM_DIAGRAM):    filename _OUT "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\EMOUTPUT.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "24 December 2017" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "09:57:12 o'clock" );
MPRINT(EM_DIAGRAM):   file _OUT;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "User:                misil";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Training Output";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _OUTIN "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\EMTRAIN.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):   ;
MPRINT(EM_COPYFILE):   data _null_;
MPRINT(EM_COPYFILE):   length line $20000;
MPRINT(EM_COPYFILE):   file _OUT MOD lrecl=20000;
MPRINT(EM_COPYFILE):   fid=fopen("_OUTIN",'i',20000,'v');
MPRINT(EM_COPYFILE):   if fid > 0 then do;
MPRINT(EM_COPYFILE):   do while(^fread(fid));
MPRINT(EM_COPYFILE):   rlen = frlen(fid);
MPRINT(EM_COPYFILE):   rc= fget(fid,line,20000);
MPRINT(EM_COPYFILE):   start = length(line)-length(left(line))+1;
MPRINT(EM_COPYFILE):   line=strip(line);
MPRINT(EM_COPYFILE):   put @start line;
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   if fid > 0 then rc=fclose(fid);
MPRINT(EM_COPYFILE):   end;
MPRINT(EM_COPYFILE):   run;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _OUTIN;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   file _OUT mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   put // "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Score Output";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _OUTIN "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\EMSCORE.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _OUTIN;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   file _OUT mod;
MPRINT(EM_DIAGRAM):   put _page_;
MPRINT(EM_DIAGRAM):   put // "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Report Output";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    filename _OUTIN "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\EMREPORT.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   filename _OUTIN;
MPRINT(EM_DIAGRAM):    filename _OUT;
MPRINT(EM_DIAGRAM):    filename _emtool_ 'C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\EMRUNSTATUS.xml' encoding="UTF-8" NOBOM;
22362      proc freq data=EMWS1.Clus6_VariableSet noprint;
MPRINT(EM_DIAGRAM):    proc freq data=EMWS1.Clus6_VariableSet noprint;
22363      table ROLE*LEVEL/out=WORK.Clus6META;
MPRINT(EM_DIAGRAM):   table ROLE*LEVEL/out=WORK.Clus6META;
22364      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 10 observations read from the data set EMWS1.CLUS6_VARIABLESET.
NOTE: The data set WORK.CLUS6META has 5 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.08 seconds
      cpu time            0.04 seconds
 
 
22365      proc print data=WORK.Clus6META label noobs;
MPRINT(EM_DIAGRAM):   proc print data=WORK.Clus6META label noobs;
22366      var ROLE LEVEL COUNT;
MPRINT(EM_DIAGRAM):   var ROLE LEVEL COUNT;
22367      label ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))" LEVEL = "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label ROLE = "Role" LEVEL = "Measurement Level" COUNT = "Frequency Count";
22368      title9 ' ';
MPRINT(EM_DIAGRAM):   title9 ' ';
22369      title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_varSummary_title  , NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Variable Summary";
MPRINT(EM_DIAGRAM):   run;
22370      run;
 
NOTE: There were 5 observations read from the data set WORK.CLUS6META.
NOTE: The PROCEDURE PRINT printed page 1.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
22371      title10;
MPRINT(EM_DIAGRAM):   title10;
22372      data WORK.M1BGQTVX;
MPRINT(EM_DIAGRAM):    data WORK.M1BGQTVX;
22373      set WORK.M1BGQTVX;
MPRINT(EM_DIAGRAM):   set WORK.M1BGQTVX;
22374      if role eq 'REJECTED' then role = 'INPUT';
MPRINT(EM_DIAGRAM):   if role eq 'REJECTED' then role = 'INPUT';
22375      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set WORK.M1BGQTVX.
NOTE: The data set WORK.M1BGQTVX has 3 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Clus6: Preparing metadata for training;
MPRINT(EM_DIAGRAM):   ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   data WORK.M1BGQTVX;
MPRINT(EM_DIAGRAM):   set WORK.M1BGQTVX;
MPRINT(EM_DIAGRAM):   if role eq 'REJECTED' then role = 'INPUT';
MPRINT(EM_DIAGRAM):   run;
22384      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
22385      * Clus6: Training;
MPRINT(EM_DIAGRAM):   * Clus6: Training;
22386      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
22387      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
22388      * Clus6: DMDBClass Macro ;
MPRINT(EM_DIAGRAM):   * Clus6: DMDBClass Macro ;
22389      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
22390      %macro DMDBClass;
22391
22392      %mend DMDBClass;
22393      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
22394      * Clus6: DMDBVar Macro ;
MPRINT(EM_DIAGRAM):   * Clus6: DMDBVar Macro ;
22395      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
22396      %macro DMDBVar;
22397          CustMonVal IMP_MonthSal policy_time
22398      %mend DMDBVar;
22399      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
22400      * Clus6: Create DMDB;
MPRINT(EM_DIAGRAM):   * Clus6: Create DMDB;
22401      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
22402      proc dmdb batch data=EMWS1.Filter4_TRAIN
22403      dmdbcat=WORK.Clus6_DMDB
22404      maxlevel = 513
22405      out=WORK.Clus6_DMDB
22406      ;
MPRINT(EM_DIAGRAM):   proc dmdb batch data=EMWS1.Filter4_TRAIN dmdbcat=WORK.Clus6_DMDB maxlevel = 513 out=WORK.Clus6_DMDB ;
MPRINT(EM_DIAGRAM):   var
22407      var %DMDBVar;
MPRINT(DMDBVAR):   CustMonVal IMP_MonthSal policy_time
MPRINT(EM_DIAGRAM):  ;
22408      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Records processed = 10266   Memory used = 511K.
NOTE: There were 10296 observations read from the data set A2Z_INSU.A2Z_INSURANCE.
NOTE: There were 10296 observations read from the data set EMWS1.IDS_DATA.
NOTE: There were 10296 observations read from the data set EMWS1.IMPT_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS2_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS3_TRAIN.
NOTE: View EMWS1.FILTER4_TRAIN.VIEW used (Total process time):
      real time           0.25 seconds
      cpu time            0.25 seconds
 
NOTE: There were 10296 observations read from the data set EMWS1.DROP2_TRAIN.
NOTE: There were 10266 observations read from the data set EMWS1.FILTER4_TRAIN.
NOTE: The data set WORK.CLUS6_DMDB has 10266 observations and 3 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.27 seconds
      cpu time            0.25 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
MPRINT(EM_DIAGRAM):   *--- end code ---*;
22409      quit;
22410      *--- end code ---*;
 
22411      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
22412      * Clus6: Interval Inputs Macro ;
MPRINT(EM_DIAGRAM):   * Clus6: Interval Inputs Macro ;
22413      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
22414      %macro DMVQINTERVAL;
22415          CustMonVal IMP_MonthSal policy_time
22416      %mend DMVQINTERVAL;
22417      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
22418      * Clus6: Run DMVQ procedure;
MPRINT(EM_DIAGRAM):   * Clus6: Run DMVQ procedure;
22419      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
22420      title;
MPRINT(EM_DIAGRAM):   title;
22421      options nodate;
MPRINT(EM_DIAGRAM):   options nodate;
22422      proc dmvq data=WORK.Clus6_DMDB dmdbcat=WORK.Clus6_DMDB std=STD nominal=GLM ordinal=RANK
22423      ;
MPRINT(EM_DIAGRAM):   proc dmvq data=WORK.Clus6_DMDB dmdbcat=WORK.Clus6_DMDB std=STD nominal=GLM ordinal=RANK ;
NOTE: The training set WORK.CLUS6_DMDB.DATA has 3 variable(s).
NOTE: The DMVQ statement has finished with return code=0 and status=begin.
MPRINT(EM_DIAGRAM):   input
22424      input %DMVQINTERVAL / level=interval;
MPRINT(DMVQINTERVAL):   CustMonVal IMP_MonthSal policy_time
MPRINT(EM_DIAGRAM):   / level=interval;
NOTE: 3 input variable(s) defined for ID=I1.
NOTE: The INPUT statement has finished with return code=0 and status=variables.
22425      VQ maxc = 3 clusname=_SEGMENT_ CLUSLABEL="Segment Id" DISTLABEL="Distance";
MPRINT(EM_DIAGRAM):   VQ maxc = 3 clusname=_SEGMENT_ CLUSLABEL="Segment Id" DISTLABEL="Distance";
NOTE: A maximum of 3 clusters have been requested.
NOTE: The VQ statement has finished with return code=0 and status=architecture.
22426      MAKE outvar=EMWS1.Clus6_OUTVAR;
MPRINT(EM_DIAGRAM):   MAKE outvar=EMWS1.Clus6_OUTVAR;
 
NOTE: 3 input variable(s).
NOTE: Number of cases=10266
NOTE: Sum of frequencies=10266
NOTE: Sum of weights=10266
NOTE: VARDEF=DF
NOTE: Maximum number of categories=0
NOTE: The total number of variables is 3 with dimensionality 3.
NOTE: 3 variables will be used for clustering.
NOTE: Open output data set EMWS1.CLUS6_OUTVAR.DATA with 4 variables.
NOTE: The data set EMWS1.CLUS6_OUTVAR has 4 observations and 4 variables.
NOTE: The MAKE statement has finished with return code=0 and status=made.
22427      INITIAL radius=0
22428      initial=PRINCOMP
22429      ;
MPRINT(EM_DIAGRAM):   INITIAL radius=0 initial=PRINCOMP ;
NOTE: 3 seeds were selected from data set WORK.CLUS6_DMDB.DATA using the PRINCOMP algorithm.
NOTE: The INITIAL statement has finished with return code=0 and status=initialized.
22430      TRAIN tech=FORGY
22431      ;
MPRINT(EM_DIAGRAM):   TRAIN tech=FORGY ;
NOTE: F-Convergence criterion is satisfied.
NOTE: The TRAIN statement has finished with return code=0 and status=trained.
22432      SAVE outstat=EMWS1.Clus6_OUTSTAT outmean=EMWS1.Clus6_OUTMEAN;
MPRINT(EM_DIAGRAM):   SAVE outstat=EMWS1.Clus6_OUTSTAT outmean=EMWS1.Clus6_OUTMEAN;
NOTE: The data set EMWS1.CLUS6_OUTSTAT has 34 observations and 6 variables.
NOTE: The data set EMWS1.CLUS6_OUTMEAN has 3 observations and 12 variables.
NOTE: The SAVE statement has finished with return code=0 and status=statistics.
22433      code file="C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\DMVQSCORECODE.sas"
22434      group=Clus6
22435      ;
MPRINT(EM_DIAGRAM):   code file="C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\DMVQSCORECODE.sas" group=Clus6 ;
NOTE: External file C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\DMVQSCORECODE.sas opened.
NOTE: The CODE statement has finished with return code=0 and status=statistics.
22436      run;
MPRINT(EM_DIAGRAM):   run;
 
22437      quit;
MPRINT(EM_DIAGRAM):   quit;
 
NOTE: There were 10266 observations read from the data set WORK.CLUS6_DMDB.
NOTE: PROCEDURE DMVQ used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
 
 
22438      libname _spdslib;
MPRINT(EM_DIAGRAM):    libname _spdslib;
WARNING: Libref _SPDSLIB is not assigned.
22439      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
22440      * Clus6: Cluster Label;
MPRINT(EM_DIAGRAM):   * Clus6: Cluster Label;
22441      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
22442      data EMWS1.Clus6_LABEL;
MPRINT(EM_DIAGRAM):   data EMWS1.Clus6_LABEL;
22443      length _SEGMENT_ 8 Label $80;
MPRINT(EM_DIAGRAM):   length _SEGMENT_ 8 Label $80;
22444      format _SEGMENT_ 4.;
MPRINT(EM_DIAGRAM):   format _SEGMENT_ 4.;
22445      label _SEGMENT_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentName_vlabel,  NOQUOTE))";
MPRINT(EM_DIAGRAM):   label _SEGMENT_ = "Segment Name";
22446      label Label = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentLabel_vlabel,  NOQUOTE))";
MPRINT(EM_DIAGRAM):   label Label = "Segment Label";
22447      _SEGMENT_= 1;
MPRINT(EM_DIAGRAM):   _SEGMENT_= 1;
22448      Label='Cluster1';
MPRINT(EM_DIAGRAM):   Label='Cluster1';
22449      output;
MPRINT(EM_DIAGRAM):   output;
22450      _SEGMENT_= 2;
MPRINT(EM_DIAGRAM):   _SEGMENT_= 2;
22451      Label='Cluster2';
MPRINT(EM_DIAGRAM):   Label='Cluster2';
22452      output;
MPRINT(EM_DIAGRAM):   output;
22453      _SEGMENT_= 3;
MPRINT(EM_DIAGRAM):   _SEGMENT_= 3;
22454      Label='Cluster3';
MPRINT(EM_DIAGRAM):   Label='Cluster3';
22455      output;
MPRINT(EM_DIAGRAM):   output;
22456      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: The data set EMWS1.CLUS6_LABEL has 3 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
MPRINT(EM_DIAGRAM):    proc printto;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "24 December 2017" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "09:57:13 o'clock" );
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Score Log";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
*------------------------------------------------------------*
* Score Log
Date:                24 December 2017
Time:                09:57:13 o'clock
*------------------------------------------------------------*
MPRINT(EM_DIAGRAM):    filename O1BN4VDL "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\EMSCORE.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):   proc printto print=O1BN4VDL new;
MPRINT(EM_DIAGRAM):   run;
22558      proc transpose data=EMWS1.Clus6_OUTVAR out=WORK.Clus6_OUTVAR(rename=(COl2=NAME) where=(COL1='IMPUTED'));
MPRINT(EM_DIAGRAM):    proc transpose data=EMWS1.Clus6_OUTVAR out=WORK.Clus6_OUTVAR(rename=(COl2=NAME) where=(COL1='IMPUTED'));
22559      var CustMonVal--policy_time;
MPRINT(EM_DIAGRAM):   var CustMonVal--policy_time;
22560      where _TYPE_ in('TYPE' 'VARIABLE');
MPRINT(EM_DIAGRAM):   where _TYPE_ in('TYPE' 'VARIABLE');
22561      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set EMWS1.CLUS6_OUTVAR.
      WHERE _TYPE_ in ('TYPE', 'VARIABLE');
NOTE: The data set WORK.CLUS6_OUTVAR has 0 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
22562      proc sort data=WORK.Clus6_OUTVAR;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.Clus6_OUTVAR;
22563      by NAME;
MPRINT(EM_DIAGRAM):   by NAME;
22564      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Input data set is empty.
NOTE: The data set WORK.CLUS6_OUTVAR has 0 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
22565      proc sort data=EMWS1.Clus6_VariableSet(KEEP=NAME ROLE LEVEL) out=WORK.Clus6_SORTEDVARS;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS1.Clus6_VariableSet(KEEP=NAME ROLE LEVEL) out=WORK.Clus6_SORTEDVARS;
22566      by NAME;
MPRINT(EM_DIAGRAM):   by NAME;
22567      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 10 observations read from the data set EMWS1.CLUS6_VARIABLESET.
NOTE: The data set WORK.CLUS6_SORTEDVARS has 10 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
22568      data WORK.Clus6_OUTVAR;
MPRINT(EM_DIAGRAM):   data WORK.Clus6_OUTVAR;
22569      merge WORK.Clus6_OUTVAR(in=INVAR) WORK.Clus6_SORTEDVARS;
MPRINT(EM_DIAGRAM):   merge WORK.Clus6_OUTVAR(in=INVAR) WORK.Clus6_SORTEDVARS;
22570      by NAME;
MPRINT(EM_DIAGRAM):   by NAME;
22571      if INVAR then output;
MPRINT(EM_DIAGRAM):   if INVAR then output;
22572      run;
MPRINT(EM_DIAGRAM):   run;
 
WARNING: Multiple lengths were specified for the BY variable NAME by input data sets. This might cause unexpected results.
NOTE: There were 0 observations read from the data set WORK.CLUS6_OUTVAR.
NOTE: There were 10 observations read from the data set WORK.CLUS6_SORTEDVARS.
NOTE: The data set WORK.CLUS6_OUTVAR has 0 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of this session.
22573      filename emflow "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\EMFLOWSCORE.sas";
MPRINT(EM_DIAGRAM):    filename emflow "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\EMFLOWSCORE.sas";
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Clus6: Scoring DATA data;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
22574      *------------------------------------------------------------*;
22575      * Clus6: Scoring DATA data;
22576      *------------------------------------------------------------*;
22577      data EMWS1.Clus6_TRAIN
22578      / view=EMWS1.Clus6_TRAIN
22579      ;
MPRINT(EM_DIAGRAM):   data EMWS1.Clus6_TRAIN / view=EMWS1.Clus6_TRAIN ;
22580      set EMWS1.Filter4_TRAIN
22581      ;
MPRINT(EM_DIAGRAM):   set EMWS1.Filter4_TRAIN ;
22582      %inc emflow;
MPRINT(EM_DIAGRAM):   *****************************************;
MPRINT(EM_DIAGRAM):   *** Begin Scoring Code from PROC DMVQ ***;
MPRINT(EM_DIAGRAM):   *****************************************;
MPRINT(EM_DIAGRAM):   *** Begin Class Look-up, Standardization, Replacement ;
MPRINT(EM_DIAGRAM):   drop _dm_bad;
MPRINT(EM_DIAGRAM):   _dm_bad = 0;
MPRINT(EM_DIAGRAM):   *** Standardize CustMonVal ;
MPRINT(EM_DIAGRAM):   drop T_CustMonVal ;
MPRINT(EM_DIAGRAM):   if missing( CustMonVal ) then T_CustMonVal = .;
MPRINT(EM_DIAGRAM):   else T_CustMonVal = (CustMonVal - 217.189924021041) * 0.0039155522443;
MPRINT(EM_DIAGRAM):   *** Standardize IMP_MonthSal ;
MPRINT(EM_DIAGRAM):   drop T_IMP_MonthSal ;
MPRINT(EM_DIAGRAM):   if missing( IMP_MonthSal ) then T_IMP_MonthSal = .;
MPRINT(EM_DIAGRAM):   else T_IMP_MonthSal = (IMP_MonthSal - 2499.16033508669) * 0.00101808692285;
MPRINT(EM_DIAGRAM):   *** Standardize policy_time ;
MPRINT(EM_DIAGRAM):   drop T_policy_time ;
MPRINT(EM_DIAGRAM):   if missing( policy_time ) then T_policy_time = .;
MPRINT(EM_DIAGRAM):   else T_policy_time = (policy_time - 29.9896746541983) * 0.15149321472018;
MPRINT(EM_DIAGRAM):   *** End Class Look-up, Standardization, Replacement ;
MPRINT(EM_DIAGRAM):   *** Omitted Cases;
MPRINT(EM_DIAGRAM):   if _dm_bad then do;
MPRINT(EM_DIAGRAM):   _SEGMENT_ = .;
MPRINT(EM_DIAGRAM):   Distance = .;
MPRINT(EM_DIAGRAM):   goto CLUS6vlex ;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   *** omitted;
MPRINT(EM_DIAGRAM):   *** Compute Distances and Cluster Membership;
MPRINT(EM_DIAGRAM):   label _SEGMENT_ = 'Segment Id' ;
MPRINT(EM_DIAGRAM):   label Distance = 'Distance' ;
MPRINT(EM_DIAGRAM):   array CLUS6vads [3] _temporary_;
MPRINT(EM_DIAGRAM):   drop _vqclus _vqmvar _vqnvar;
MPRINT(EM_DIAGRAM):   _vqmvar = 0;
MPRINT(EM_DIAGRAM):   do _vqclus = 1 to 3;
MPRINT(EM_DIAGRAM):   CLUS6vads [_vqclus] = 0;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   if not missing( T_CustMonVal ) then do;
MPRINT(EM_DIAGRAM):   CLUS6vads [1] + ( T_CustMonVal - -0.31258041704809 )**2;
MPRINT(EM_DIAGRAM):   CLUS6vads [2] + ( T_CustMonVal - -0.69934592236733 )**2;
MPRINT(EM_DIAGRAM):   CLUS6vads [3] + ( T_CustMonVal - 1.14305735952932 )**2;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else _vqmvar + 1;
MPRINT(EM_DIAGRAM):   if not missing( T_IMP_MonthSal ) then do;
MPRINT(EM_DIAGRAM):   CLUS6vads [1] + ( T_IMP_MonthSal - 1.02565087823553 )**2;
MPRINT(EM_DIAGRAM):   CLUS6vads [2] + ( T_IMP_MonthSal - -0.77151458780734 )**2;
MPRINT(EM_DIAGRAM):   CLUS6vads [3] + ( T_IMP_MonthSal - -0.33577228876365 )**2;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else _vqmvar + 1;
MPRINT(EM_DIAGRAM):   if not missing( T_policy_time ) then do;
MPRINT(EM_DIAGRAM):   CLUS6vads [1] + ( T_policy_time - -0.07675710773781 )**2;
MPRINT(EM_DIAGRAM):   CLUS6vads [2] + ( T_policy_time - 0.07668087261069 )**2;
MPRINT(EM_DIAGRAM):   CLUS6vads [3] + ( T_policy_time - 0.00403185124051 )**2;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else _vqmvar + 1;
MPRINT(EM_DIAGRAM):   _vqnvar = 3 - _vqmvar;
MPRINT(EM_DIAGRAM):   if _vqnvar <= 1.0231815394945E-12 then do;
MPRINT(EM_DIAGRAM):   _SEGMENT_ = .;
MPRINT(EM_DIAGRAM):   Distance = .;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else do;
MPRINT(EM_DIAGRAM):   _SEGMENT_ = 1;
MPRINT(EM_DIAGRAM):   Distance = CLUS6vads [1];
MPRINT(EM_DIAGRAM):   _vqfzdst = Distance * 0.99999999999988;
MPRINT(EM_DIAGRAM):   drop _vqfzdst;
MPRINT(EM_DIAGRAM):   do _vqclus = 2 to 3;
MPRINT(EM_DIAGRAM):   if CLUS6vads [_vqclus] < _vqfzdst then do;
MPRINT(EM_DIAGRAM):   _SEGMENT_ = _vqclus;
MPRINT(EM_DIAGRAM):   Distance = CLUS6vads [_vqclus];
MPRINT(EM_DIAGRAM):   _vqfzdst = Distance * 0.99999999999988;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   Distance = sqrt(Distance * (3 / _vqnvar));
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   CLUS6vlex :;
MPRINT(EM_DIAGRAM):   ***************************************;
MPRINT(EM_DIAGRAM):   *** End Scoring Code from PROC DMVQ ***;
MPRINT(EM_DIAGRAM):   ***************************************;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Clus6: Creating Segment Label;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   length _SEGMENT_LABEL_ $80;
MPRINT(EM_DIAGRAM):   label _SEGMENT_LABEL_= 'Segment Description';
MPRINT(EM_DIAGRAM):   if _SEGMENT_ = 1 then _SEGMENT_LABEL_="Cluster1";
MPRINT(EM_DIAGRAM):   else if _SEGMENT_ = 2 then _SEGMENT_LABEL_="Cluster2";
MPRINT(EM_DIAGRAM):   else if _SEGMENT_ = 3 then _SEGMENT_LABEL_="Cluster3";
22670      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: DATA STEP view saved on file EMWS1.CLUS6_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.FILTER4_TRAIN.VIEW used (Total process time):
      real time           0.22 seconds
      cpu time            0.20 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.23 seconds
      cpu time            0.21 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
22671      quit;
22672      filename emflow;
MPRINT(EM_DIAGRAM):   filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
22673      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
22674      * Clus6: Computing metadata for TRAIN data;
MPRINT(EM_DIAGRAM):   * Clus6: Computing metadata for TRAIN data;
22675      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
 
NOTE: View EMWS1.CLUS6_TRAIN.VIEW used (Total process time):
      real time           0.21 seconds
      cpu time            0.20 seconds
 
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * &nodeid: Computing Metadata for TRAIN data;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   filename _delta "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\CDELTA_TRAIN.sas";
MPRINT(EMADVISECOLUMNS):   proc display c=sashelp.emmeta.advisecolumns.scl;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    options validvarname=any;
MPRINT(EMADVISECOLUMNS):   proc contents data=EMWS1.Clus6_TRAIN out=_tempAdvisor noprint;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):   options validvarname=V7;
MPRINT(EMADVISECOLUMNS):    data _null_;
MPRINT(EMADVISECOLUMNS):   dsid = open('EMWS1.Clus6_TRAIN');
MPRINT(EMADVISECOLUMNS):   call symput('_dsidTable', strip(put(dsid, best.)));
MPRINT(EMADVISECOLUMNS):   if dsid then do;
MPRINT(EMADVISECOLUMNS):   call symput('_engineTable', attrc(dsid, 'ENGINE'));
MPRINT(EMADVISECOLUMNS):   dsid = close(dsid);
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    proc contents data=EMWS1.Clus6_TRAIN out=WORK.M1IAQ0FG noprint;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M1IAQ0FG;
MPRINT(EMADVISECOLUMNS):   length NAME $ 64 TYPE $ 1 LABEL $ 200 FORMAT $ 36 INFORMAT $36 INDEX $ 1 INDEXTYPE $ 9;
MPRINT(EMADVISECOLUMNS):   label NAME =;
MPRINT(EMADVISECOLUMNS):   set WORK.M1IAQ0FG(keep=name type length label format formatl formatd informat informl informd idxusage rename=(type=itype));
MPRINT(EMADVISECOLUMNS):   if itype = 1 then type = 'N';
MPRINT(EMADVISECOLUMNS):   else type = 'C';
MPRINT(EMADVISECOLUMNS):   if formatl > 0 then do;
MPRINT(EMADVISECOLUMNS):   if format ne '' then do;
MPRINT(EMADVISECOLUMNS):   if type='N' then format = strip(format)!!strip(put(formatl, best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EMADVISECOLUMNS):   else format = strip(format)!!strip(put(formatl, best12.))!!'.';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else format = strip(put(formatl, best12.))!!'.'!!strip(put(formatd, best12.));
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if format ne '' then format = strip(format)!!'.';
MPRINT(EMADVISECOLUMNS):   if informl > 0 then do;
MPRINT(EMADVISECOLUMNS):   if informat ne ' ' then do;
MPRINT(EMADVISECOLUMNS):   if type='N' then informat = strip(informat)!!strip(put(informl, best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EMADVISECOLUMNS):   else informat = strip(informat)!!strip(put(informl, best12.))!!'.';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else informat = strip(put(informl, best12.))!!'.'!!strip(put(informd, best12.));
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if informat ne '' then informat = strip(informat)!!'.';
MPRINT(EMADVISECOLUMNS):   if idxusage = 'NONE' then index ="N";
MPRINT(EMADVISECOLUMNS):   else index = "Y";
MPRINT(EMADVISECOLUMNS):   indextype = idxusage;
MPRINT(EMADVISECOLUMNS):   drop idxusage itype formatl formatd informl informd;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M1IAQ0FG;
MPRINT(EMADVISECOLUMNS):   length UNAME $64;
MPRINT(EMADVISECOLUMNS):   set WORK.M1IAQ0FG;
MPRINT(EMADVISECOLUMNS):   UNAME = upcase(NAME);
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    proc sort data=WORK.M2MEOMW4 NOTHREADS;
MPRINT(EMADVISECOLUMNS):   by UNAME;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M2MEOMW4;
MPRINT(EMADVISECOLUMNS):   drop UNAME;
MPRINT(EMADVISECOLUMNS):   set WORK.M2MEOMW4;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M3M47BCA(keep=NAME ATTR);
MPRINT(EMADVISECOLUMNS):   length ATTR $ 20;
MPRINT(EMADVISECOLUMNS):   set WORK.M2MEOMW4;
MPRINT(EMADVISECOLUMNS):   if level ne "INTERVAL" then do;
MPRINT(EMADVISECOLUMNS):   if order = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'ORDER';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if format ne ' ' and formattype = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'FORMATTYPE';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if role = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'ROLE';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if level = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'LEVEL';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if type = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'TYPE';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if index = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'INDEX';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if report = ' ' then do;
MPRINT(EMADVISECOLUMNS):   attr = 'REPORT';
MPRINT(EMADVISECOLUMNS):   output;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):   proc sort NOTHREADS;
MPRINT(EMADVISECOLUMNS):   by attr;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M2MEOMW4;
MPRINT(EMADVISECOLUMNS):   length NAME $64 ROLE $ 32 LEVEL $ 10 ORDER $ 8 CREATOR $32 FORMATTYPE $ 10 FAMILY $ 10 LOWERLIMIT 8 UPPERLIMIT 8 REPORT $1 DISTRIBUTION $ 20 COMMENT $64;
MPRINT(EMADVISECOLUMNS):   length levelAssigned 8 roleAssigned 8 PRICE 8;
MPRINT(EMADVISECOLUMNS):   set WORK.M2MEOMW4;
MPRINT(EMADVISECOLUMNS):   if formattype = ' ' then do;
MPRINT(EMADVISECOLUMNS):   if format ne ' ' then do;
MPRINT(EMADVISECOLUMNS):   if type = 'N' then do;
MPRINT(EMADVISECOLUMNS):   pos = indexc(format,'.1234567890');
MPRINT(EMADVISECOLUMNS):   if pos > 1 then tempfmt = substr(format,1, pos-1);
MPRINT(EMADVISECOLUMNS):   else tempfmt = ' ';
MPRINT(EMADVISECOLUMNS):   flen = length(tempfmt);
MPRINT(EMADVISECOLUMNS):   select;
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("DATE" "DAY" "DDMMYY" "DOWNAME" "JULDAY" "JULIAN" "MMDDYY" "MMDDYYD" "MMDDYYC" "MMDDYYN" "MMDDYYP" "MMDDYYS" "MONNAME" "MONTH" "MONYY" "NENGO" "QTR" "QTRR" "WEEKDATE" "WEEKDATX" "WEEKDAY" "WORDDATE" "WORDDATX"
"YEAR" "YYMMDD" "YYMON" "YYMMDDC" "YYMMDDD" "YYMMDDN" "YYMMDDP" "YYMMDDS" "EURDFDE" "NJDATE" "NLDATE" "EURDFDD" "EURDFDWN" "EURDFMN" "EURDFMY" "EURDFWK" "EURDFWKX" "EURDFWDX" "EURDFDN" "EURDFDE" )) formattype = 'DATE';
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("DATETIME" "EURDFDT" "TOD" )) formattype = "DATETIME";
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("HHMM" "HOUR" "MMSS" "TIME" "TIMEAMPM" )) formattype = "TIME";
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("COMMA" "COMMAX" "DOLLAR" "DOLLARX" "E" "FRACT" "NEGPAREN" "PERCENT")) formattype="QUANTITY";
MPRINT(EMADVISECOLUMNS):   when(tempfmt in ("BINARY" "HEX" "IB" "OCTAL" "PD" "PIB" "PK" "RB" "SSN" "Z" "ZD")) formattype = "CODING";
MPRINT(EMADVISECOLUMNS):   otherwise do;
MPRINT(EMADVISECOLUMNS):   formattype = "USER";
MPRINT(EMADVISECOLUMNS):   if compress(tempfmt, '0123456789.', '') = '' then formattype='NUM';
MPRINT(EMADVISECOLUMNS):   else if substr(tempfmt, 1, 6)='NLDATE' then formattype = "DATE";
MPRINT(EMADVISECOLUMNS):   else if substr(tempfmt, 1, 6)='NLDATM' then formattype = "DATETIME";
MPRINT(EMADVISECOLUMNS):   else if substr(tempfmt, 1, 4)='NLTIM' then formattype = "TIME";
MPRINT(EMADVISECOLUMNS):   else if flen >= 4 then do;
MPRINT(EMADVISECOLUMNS):   str = substr(tempfmt,1,4);
MPRINT(EMADVISECOLUMNS):   if str in ("MMYY" "YYMM" "YYQR") then formattype ="DATE";
MPRINT(EMADVISECOLUMNS):   else if str = "S370" then formattype = "CODING";
MPRINT(EMADVISECOLUMNS):   else if str = "BEST" then formattype = "NUM";
MPRINT(EMADVISECOLUMNS):   drop str;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if flen >=3 and substr(tempfmt,1,3) = "YYQ" then formatType = "DATE";
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   drop flen tempfmt pos;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else do;
MPRINT(EMADVISECOLUMNS):   formatType = "CATEGORY";
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if formatType = "NUM" then do;
MPRINT(EMADVISECOLUMNS):   if index = "Y" then formatType = "DISCRETE";
MPRINT(EMADVISECOLUMNS):   else formatType = "QUANTITY";
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if level = ' ' then do;
MPRINT(EMADVISECOLUMNS):   if formatType in ("CATEGORY", "CODING", "ID") or type = "C" then level = "NOMINAL";
MPRINT(EMADVISECOLUMNS):   else level = "INTERVAL";
MPRINT(EMADVISECOLUMNS):   levelAssigned = 1;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else level = upcase(level);
MPRINT(EMADVISECOLUMNS):   if role = ' ' then do;
MPRINT(EMADVISECOLUMNS):   length name_prefix $8 _uname $64;
MPRINT(EMADVISECOLUMNS):   drop name_prefix _uname _freqflag;
MPRINT(EMADVISECOLUMNS):   retain _freqflag;
MPRINT(EMADVISECOLUMNS):   if LENGTH> 80 then ROLE = 'TEXT';
MPRINT(EMADVISECOLUMNS):   _uname = upcase(NAME);
MPRINT(EMADVISECOLUMNS):   select(_uname);
MPRINT(EMADVISECOLUMNS):   when('_PARTIND_') do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'ID';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   when('_WARN_') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_SEGMENT') do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'SEGMENT';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   when('_NODE_') do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'SEGMENT';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   when('EM_CLASSTARGET') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_VALUETARGET') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_PREDICTION') ROLE = 'PREDICT';
MPRINT(EMADVISECOLUMNS):   when('EM_PROBABILITY') ROLE = 'PREDICT';
MPRINT(EMADVISECOLUMNS):   when('EM_EVENTPROBABILITY') ROLE = 'PREDICT';
MPRINT(EMADVISECOLUMNS):   when('EM_CLASSIFICATION') ROLE = 'CLASSIFICATION';
MPRINT(EMADVISECOLUMNS):   when('EM_DECISION') ROLE = 'DECISION';
MPRINT(EMADVISECOLUMNS):   when('EM_PROFIT') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_LOSS') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('EM_ROI') ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   when('URI') ROLE = 'URL';
MPRINT(EMADVISECOLUMNS):   when('FILTERED') ROLE = 'TEXTLOC';
MPRINT(EMADVISECOLUMNS):   otherwise do;
MPRINT(EMADVISECOLUMNS):   if upcase(NAME) =: 'ZIP' then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'REJECTED';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   COMMENT = 'Rejected by: Exceed the maximum class level of %s';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if upcase(NAME) in('FREQ', 'FREQUENCY') then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'FREQ';
MPRINT(EMADVISECOLUMNS):   if TYPE = 'C' then ROLE = 'INPUT';
MPRINT(EMADVISECOLUMNS):   else if _freqflag =1 then ROLE='REJECTED';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else do;
MPRINT(EMADVISECOLUMNS):   name_prefix = scan(_uname, 1, '_');
MPRINT(EMADVISECOLUMNS):   if scan(_uname, 2, '_') = '' then name_prefix='';
MPRINT(EMADVISECOLUMNS):   if name_prefix in('F', 'I', 'U') then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'CLASSIFICATION';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if name_prefix in('Q') then ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   else if name_prefix in('P', 'V') then ROLE = 'PREDICT';
MPRINT(EMADVISECOLUMNS):   else if name_prefix in('R', 'RS', 'RT', 'RD', 'RDS', 'RDT', 'RA', 'RAS', 'RAT') then ROLE = 'RESIDUAL';
MPRINT(EMADVISECOLUMNS):   else if name_prefix ='D' then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'DECISION';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if name_prefix ='B' then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'SEGMENT';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else if name_prefix in('EP', 'BP', 'CP', 'EL', 'CL', 'BL', 'W', 'ROI', 'IC') then ROLE = 'ASSESS';
MPRINT(EMADVISECOLUMNS):   else do;
MPRINT(EMADVISECOLUMNS):   array _ROLE_ (19) $32 _TEMPORARY_ ('ASSESS','CLASSIFICATION','CENSOR', 'COST', 'CROSSID', 'DECISION', 'ID','INPUT', 'LABEL', 'MISSING','PREDICT','REFERRER','REJECTED', 'RESIDUAL','SEGMENT', 'SEQUENCE','TARGET', 'TEXT', 'TIMEID');
MPRINT(EMADVISECOLUMNS):   drop _found_ i;
MPRINT(EMADVISECOLUMNS):   _found_=0;
MPRINT(EMADVISECOLUMNS):   do i=1 to 19 until(_found_=1);
MPRINT(EMADVISECOLUMNS):   if index(_uname, trim(_ROLE_{i}))=1 then do;
MPRINT(EMADVISECOLUMNS):   ROLE=_ROLE_{i};
MPRINT(EMADVISECOLUMNS):   if ROLE = 'ID' then LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   else if ROLE = 'SEGMENT' then LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   else if ROLE = 'TIMEID' and TYPE='N' then LEVEL = 'INTERVAL';
MPRINT(EMADVISECOLUMNS):   _found_=1;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if length(_uname)>2 then do;
MPRINT(EMADVISECOLUMNS):   if substr(reverse(trim(_uname)), 1, 3) = 'DI_' then do;
MPRINT(EMADVISECOLUMNS):   ROLE = 'ID';
MPRINT(EMADVISECOLUMNS):   LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if ROLE='FREQ' then _freqflag=1;
MPRINT(EMADVISECOLUMNS):   else if ROLE = 'CLASSIFICATION' then LEVEL = 'NOMINAL';
MPRINT(EMADVISECOLUMNS):   if symexist('RATEMKG_ROLE') then do;
MPRINT(EMADVISECOLUMNS):   if upcase(symget('RATEMKG_ROLE')) in('Y', 'YES') then do;
MPRINT(EMADVISECOLUMNS):   if _uname =: 'POLICY' then ROLE = 'POLICYID';
MPRINT(EMADVISECOLUMNS):   else if _uname in ('PARTITION', '_PARTIND_') then ROLE = 'PARTITION';
MPRINT(EMADVISECOLUMNS):   else if type = 'N' then do;
MPRINT(EMADVISECOLUMNS):   if _uname = 'EXPOSURE' then ROLE = 'EXPOSURE';
MPRINT(EMADVISECOLUMNS):   else if _uname = 'YEAR' then ROLE = 'YEAR';
MPRINT(EMADVISECOLUMNS):   else if _uname = 'WEIGHT' then ROLE = 'WEIGHT';
MPRINT(EMADVISECOLUMNS):   else if _uname = 'OFFSET' then ROLE = 'OFFSET';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   if role = ' ' then do;
MPRINT(EMADVISECOLUMNS):   if formattype in('DATE', 'DATETIME', 'TIME') then role = 'TIMEID';
MPRINT(EMADVISECOLUMNS):   else role = 'INPUT';
MPRINT(EMADVISECOLUMNS):   roleAssigned = 1;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   else role = upcase(role);
MPRINT(EMADVISECOLUMNS):   if REPORT = '' then REPORT = 'N';
MPRINT(EMADVISECOLUMNS):   if symexist('dmwb_product') then do;
MPRINT(EMADVISECOLUMNS):   if upcase(symget('dmwb_product')) = 'FACTORYMINER_DATASOURCE' then do;
MPRINT(EMADVISECOLUMNS):   if ROLE ^in('INPUT', 'TARGET', 'REJECTED', 'SEGMENT', 'FREQ', 'ID', 'KEY') then ROLE='REJECTED';
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   end;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):    data WORK.M2MEOMW4;
MPRINT(EMADVISECOLUMNS):   set WORK.M2MEOMW4;
MPRINT(EMADVISECOLUMNS):   label NAME = "Variable Name" TYPE = "Type" ROLE = "Role" LEVEL= "Measurement Level" ORDER= "Order" CREATOR= "Creator" FORMATTYPE= "Format Type" FAMILY= "Family" DISTRIBUTION= "Distribution" PRICE= "Price" LOWERLIMIT= "Lower
limit" UPPERLIMIT= "Upper Limit" REPORT= "Report" COMMENT= "Comment" INDEX= "Index" INDEXTYPE= "IndexType" LABEL= "Label" LENGTH= "Length";
MPRINT(EMADVISECOLUMNS):   drop levelAssigned roleAssigned;
MPRINT(EMADVISECOLUMNS):   run;
MPRINT(EMADVISECOLUMNS):
MPRINT(EM_DIAGRAM):  ;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.COLUMNMETA;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * &nodeid: Merge incoming metadata;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   proc contents data=EMWS1.Filter4_TRAIN noprint out=_temp2(keep=NAME);
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=_temp2;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS1.Filter4_CMeta_TRAIN out=_temp;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data EMWS1.Clus6_CMeta_TRAIN;
MPRINT(EM_DIAGRAM):   merge WORK.COLUMNMETA(in=_a) _temp2(in=_b) _temp(drop=FORMAT INFORMAT LENGTH INDEX INDEXTYPE in=_c) end=_eof_;
MPRINT(EM_DIAGRAM):   by NAME;
MPRINT(EM_DIAGRAM):   if (^_a and _b) or (^_c and _a and _b) then delete;
MPRINT(EM_DIAGRAM):   if ^_b then CREATOR = "Clus6";
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * Clus6: Apply Delta Code;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   retain _segFlag_ 0;
MPRINT(EM_DIAGRAM):   drop _segFlag_;
MPRINT(EM_DIAGRAM):   if upcase(name) = '_SEGMENT_' then do;
MPRINT(EM_DIAGRAM):   _segFlag_ = 1;
MPRINT(EM_DIAGRAM):   role = 'SEGMENT';
MPRINT(EM_DIAGRAM):   level = 'NOMINAL';
MPRINT(EM_DIAGRAM):   label = 'Segment Variable';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if upcase(name) = '_SEGMENT_LABEL_' then do;
MPRINT(EM_DIAGRAM):   role = 'REJECTED';
MPRINT(EM_DIAGRAM):   level = 'NOMINAL';
MPRINT(EM_DIAGRAM):   label = 'Segment Description';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if upcase(NAME) = 'DISTANCE' then do;
MPRINT(EM_DIAGRAM):   role = 'REJECTED';
MPRINT(EM_DIAGRAM):   level = 'INTERVAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   else if upcase(NAME) = '_IMPUTE_' then do;
MPRINT(EM_DIAGRAM):   role = 'REJECTED';
MPRINT(EM_DIAGRAM):   level = 'INTERVAL';
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   if ^_segFlag_ and _eof_ then do;
MPRINT(EM_DIAGRAM):   type = 'N';
MPRINT(EM_DIAGRAM):   index = 'N';
MPRINT(EM_DIAGRAM):   indexType = 'NONE';
MPRINT(EM_DIAGRAM):   format = '';
MPRINT(EM_DIAGRAM):   informat = '';
MPRINT(EM_DIAGRAM):   name = '_SEGMENT_';
MPRINT(EM_DIAGRAM):   role = 'SEGMENT';
MPRINT(EM_DIAGRAM):   level = 'NOMINAL';
MPRINT(EM_DIAGRAM):   label = 'Segment Variable';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   name = '_SEGMENT_LABEL_';
MPRINT(EM_DIAGRAM):   role = 'REJECTED';
MPRINT(EM_DIAGRAM):   level = 'NOMINAL';
MPRINT(EM_DIAGRAM):   label = 'Segment Description';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   name = 'Distance';
MPRINT(EM_DIAGRAM):   role = 'REJECTED';
MPRINT(EM_DIAGRAM):   level = 'INTERVAL';
MPRINT(EM_DIAGRAM):   label = 'Distance to Cluster Seed';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   name = '_Impute_';
MPRINT(EM_DIAGRAM):   role = 'REJECTED';
MPRINT(EM_DIAGRAM):   level = 'INTERVAL';
MPRINT(EM_DIAGRAM):   label = '';
MPRINT(EM_DIAGRAM):   output;
MPRINT(EM_DIAGRAM):   end;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   filename _delta;
NOTE: View EMWS1.CLUS6_TRAIN.VIEW used (Total process time):
      real time           0.16 seconds
      cpu time            0.15 seconds
 
MPRINT(EM_DIAGRAM):    proc printto;
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):    data _null_;
MPRINT(EM_DIAGRAM):   call symput('NLDATE', strip(put(date(), NLDATE.)));
MPRINT(EM_DIAGRAM):   call symput('NLTIME', strip(put(datetime(), NLTIME.)));
MPRINT(EM_DIAGRAM):   run;
MPRINT(EM_DIAGRAM):   data _null_;
MPRINT(EM_DIAGRAM):   nldate= sasmsg("sashelp.dmine", "log_date_note", 'N', "24 December 2017" );
MPRINT(EM_DIAGRAM):   nltime= sasmsg("sashelp.dmine", "log_time_note", 'N', "09:57:15 o'clock" );
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   put "* Report Log";
MPRINT(EM_DIAGRAM):   put nldate;
MPRINT(EM_DIAGRAM):   put nltime;
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
MPRINT(EM_DIAGRAM):   run;
*------------------------------------------------------------*
* Report Log
Date:                24 December 2017
Time:                09:57:15 o'clock
*------------------------------------------------------------*
MPRINT(EM_DIAGRAM):    filename O3VUH5A9 "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\EMREPORT.out" encoding="UTF-8" NOBOM;
MPRINT(EM_DIAGRAM):   proc printto print=O3VUH5A9 new;
MPRINT(EM_DIAGRAM):   run;
23085      data WORK.M24K5IUZ;
MPRINT(EM_DIAGRAM):    data WORK.M24K5IUZ;
23086      set WORK.M24K5IUZ;
MPRINT(EM_DIAGRAM):   set WORK.M24K5IUZ;
23087      if role eq 'REJECTED' then role = 'INPUT';
MPRINT(EM_DIAGRAM):   if role eq 'REJECTED' then role = 'INPUT';
23088      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set WORK.M24K5IUZ.
NOTE: The data set WORK.M24K5IUZ has 3 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23089      data WORK.M24K5IUZ;
MPRINT(EM_DIAGRAM):    data WORK.M24K5IUZ;
23090      set WORK.M24K5IUZ end=_eof_ nobs=_nobs_;
MPRINT(EM_DIAGRAM):   set WORK.M24K5IUZ end=_eof_ nobs=_nobs_;
23091      output;
MPRINT(EM_DIAGRAM):   output;
23092      if _eof_ then do;
MPRINT(EM_DIAGRAM):   if _eof_ then do;
23093      name = '_SEGMENT_';
MPRINT(EM_DIAGRAM):   name = '_SEGMENT_';
23094      ROLE = 'TARGET';
MPRINT(EM_DIAGRAM):   ROLE = 'TARGET';
23095      LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
23096      LABEL = 'Segment Variable';
MPRINT(EM_DIAGRAM):   LABEL = 'Segment Variable';
23097      TYPE = 'N';
MPRINT(EM_DIAGRAM):   TYPE = 'N';
23098      FORMAT = '';
MPRINT(EM_DIAGRAM):   FORMAT = '';
23099      INFORMAT = '';
MPRINT(EM_DIAGRAM):   INFORMAT = '';
23100      USE='Y';
MPRINT(EM_DIAGRAM):   USE='Y';
23101      output;
MPRINT(EM_DIAGRAM):   output;
23102      end;
MPRINT(EM_DIAGRAM):   end;
23103      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set WORK.M24K5IUZ.
NOTE: The data set WORK.M24K5IUZ has 4 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23104      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
23105      * Clus6: Create decision matrix;
MPRINT(EM_DIAGRAM):   * Clus6: Create decision matrix;
23106      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
23107      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
23108      * Clus6: Tree Variables Macro ;
MPRINT(EM_DIAGRAM):   * Clus6: Tree Variables Macro ;
23109      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
23110      %macro EM_TREEVARS;
23111          CustMonVal IMP_MonthSal policy_time
23112      %mend EM_TREEVARS;
23113      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
23114      * Clus6: Tree Targets Macro ;
MPRINT(EM_DIAGRAM):   * Clus6: Tree Targets Macro ;
23115      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
23116      %macro EM_TREETARGETS;
23117          _SEGMENT_
23118      %mend EM_TREETARGETS;
23119      data EMWS1.EM_Clus6 / view=EMWS1.EM_Clus6;
MPRINT(EM_DIAGRAM):   data EMWS1.EM_Clus6 / view=EMWS1.EM_Clus6;
23120      set
23120    ! EMWS1.Clus6_TRAIN(keep=%EM_TREEVARS %EM_TREETARGETS);
MPRINT(EM_DIAGRAM):   set EMWS1.Clus6_TRAIN(keep
MPRINT(EM_DIAGRAM):  =CustMonVal IMP_MonthSal policy_time _SEGMENT_);
23121      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: DATA STEP view saved on file EMWS1.EM_CLUS6.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.CLUS6_TRAIN.VIEW used (Total process time):
      real time           0.17 seconds
      cpu time            0.15 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.18 seconds
      cpu time            0.15 seconds
 
 
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   * Clus6: Interval Inputs Macro ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
23122      *------------------------------------------------------------* ;
23123      * Clus6: Interval Inputs Macro ;
23124      *------------------------------------------------------------* ;
23125      %macro INTINPUTS;
23126          CustMonVal IMP_MonthSal policy_time
23127      %mend INTINPUTS;
23128      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
23129      * Clus6: Binary and Nominal Inputs Macro ;
MPRINT(EM_DIAGRAM):   * Clus6: Binary and Nominal Inputs Macro ;
23130      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
23131      %macro NOMINPUTS;
23132
23133      %mend NOMINPUTS;
23134      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
23135      * Clus6: Ordinal Inputs Macro ;
MPRINT(EM_DIAGRAM):   * Clus6: Ordinal Inputs Macro ;
23136      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
23137      %macro ORDINPUTS;
23138
23139      %mend ORDINPUTS;
23140      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
23141      * Clus6: Run ARBOR procedure;
MPRINT(EM_DIAGRAM):   * Clus6: Run ARBOR procedure;
23142      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
 
23143      proc arbor data=EMWS1.EM_Clus6
23144      MAXSURRS=2
23145      ;
MPRINT(EM_DIAGRAM):    proc arbor data=EMWS1.EM_Clus6 MAXSURRS=2 ;
23146      ;
MPRINT(EM_DIAGRAM):   ;
MPRINT(EM_DIAGRAM):   input
23147      input %INTINPUTS
MPRINT(INTINPUTS):   CustMonVal IMP_MonthSal policy_time
23148      / level = interval;
MPRINT(EM_DIAGRAM):   / level = interval;
23149      target _SEGMENT_ / level=NOMINAL
23150      Criterion=PROBCHISQ
23151      ;
MPRINT(EM_DIAGRAM):   target _SEGMENT_ / level=NOMINAL Criterion=PROBCHISQ ;
23152      ;
MPRINT(EM_DIAGRAM):   ;
23153      Performance DISK
23154      ;
MPRINT(EM_DIAGRAM):   Performance DISK ;
23155      MAKEMACRO NLEAVES=nleaves;
MPRINT(EM_DIAGRAM):   MAKEMACRO NLEAVES=nleaves;
NOTE: 1163039 kilobytes of physical memory.
NOTE: Will use 10266 out of 10266 training cases.
NOTE: Using memory pool with 78891008 bytes.
NOTE: Passed training data 18 times.
NOTE: Training used 1127112 bytes of work memory.
NOTE: The subtree sequence contains 42 subtrees. The largest has 83 nodes and 42 leaves.
NOTE: Using subtree with 61 nodes and 31 leaves.
NOTE: Created macro variable NLEAVES equal to 31.
23156      save
23157      MODEL=EMWS1.Clus6_PLOTDS
23158      SEQUENCE=EMWS1.Clus6_OUTSEQ
23159      IMPORTANCE=EMWS1.Clus6_OUTIMPORT
23160      NODESTAT=EMWS1.Clus6_OUTNODES
23161      SUMMARY=WORK.OUTSUMMARY_TREE_0N3SVZL
23162      STATSBYNODE=WORK.OUTSTATS_TREE_0N3SVZL
23163      Pathlistnonmissing = WORK.OUTPATH_TREE_0N3SVZL
23164      Rules = WORK.OUTRULES_TREE_0N3SVZL
23165      ;
MPRINT(EM_DIAGRAM):   save MODEL=EMWS1.Clus6_PLOTDS SEQUENCE=EMWS1.Clus6_OUTSEQ IMPORTANCE=EMWS1.Clus6_OUTIMPORT NODESTAT=EMWS1.Clus6_OUTNODES SUMMARY=WORK.OUTSUMMARY_TREE_0N3SVZL STATSBYNODE=WORK.OUTSTATS_TREE_0N3SVZL Pathlistnonmissing =
WORK.OUTPATH_TREE_0N3SVZL Rules = WORK.OUTRULES_TREE_0N3SVZL ;
NOTE: The data set EMWS1.CLUS6_OUTIMPORT has 3 observations and 5 variables.
NOTE: The data set EMWS1.CLUS6_PLOTDS has 2192 observations and 4 variables.
NOTE: The data set EMWS1.CLUS6_OUTNODES has 61 observations and 22 variables.
NOTE: The data set WORK.OUTPATH_TREE_0N3SVZL has 161 observations and 7 variables.
NOTE: The data set WORK.OUTRULES_TREE_0N3SVZL has 561 observations and 6 variables.
NOTE: The data set EMWS1.CLUS6_OUTSEQ has 42 observations and 11 variables.
NOTE: The data set WORK.OUTSTATS_TREE_0N3SVZL has 305 observations and 5 variables.
NOTE: The data set WORK.OUTSUMMARY_TREE_0N3SVZL has 16 observations and 6 variables.
23166      run;
MPRINT(EM_DIAGRAM):   run;
 
23167      quit;
MPRINT(EM_DIAGRAM):   quit;
 
NOTE: There were 10296 observations read from the data set A2Z_INSU.A2Z_INSURANCE.
NOTE: There were 10296 observations read from the data set EMWS1.IDS_DATA.
NOTE: There were 10296 observations read from the data set EMWS1.IMPT_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS2_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS3_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.DROP2_TRAIN.
NOTE: There were 10266 observations read from the data set EMWS1.FILTER4_TRAIN.
NOTE: View EMWS1.EM_CLUS6.VIEW used (Total process time):
      real time           0.57 seconds
      cpu time            0.51 seconds
 
NOTE: There were 10266 observations read from the data set EMWS1.CLUS6_TRAIN.
NOTE: There were 10266 observations read from the data set EMWS1.EM_CLUS6.
NOTE: The data set WORK._NAMEDAT has 3 observations and 5 variables.
NOTE: PROCEDURE ARBOR used (Total process time):
      real time           0.60 seconds
      cpu time            0.53 seconds
 
 
23168      data EMWS1.Clus6_OUTIMPORT;
MPRINT(EM_DIAGRAM):    data EMWS1.Clus6_OUTIMPORT;
23169      set EMWS1.Clus6_OUTIMPORT;
MPRINT(EM_DIAGRAM):   set EMWS1.Clus6_OUTIMPORT;
23170      label NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel, noquote))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, noquote))" NRULES = "%sysfunc(sasmsg(sashelp.dmine, rpt_nrules_vlabel, noquote))" IMPORTANCE =
23171         "%sysfunc(sasmsg(sashelp.dmine, rpt_importance_vlabel, noquote))" NSURROGATES = "%sysfunc(sasmsg(sashelp.dmine, rpt_nsurrogates_vlabel, noquote))"
23172      ;
MPRINT(EM_DIAGRAM):   label NAME = "Variable Name" LABEL = "Label" NRULES = "Number of Splitting Rules" IMPORTANCE = "Importance" NSURROGATES = "Number of Surrogate Rules" ;
23173      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set EMWS1.CLUS6_OUTIMPORT.
NOTE: The data set EMWS1.CLUS6_OUTIMPORT has 3 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
23174      filename x "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\ENGLISHRULES.txt" encoding='utf-8' NOBOM;
MPRINT(EM_DIAGRAM):   filename x "C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\ENGLISHRULES.txt" encoding='utf-8' NOBOM;
23175      data temp;
MPRINT(EM_DIAGRAM):    data temp;
23176      length varname $16;
MPRINT(EM_DIAGRAM):   length varname $16;
23177      retain varname;
MPRINT(EM_DIAGRAM):   retain varname;
23178      set WORK.OUTPATH_TREE_0N3SVZL;
MPRINT(EM_DIAGRAM):   set WORK.OUTPATH_TREE_0N3SVZL;
23179      if ^missing(variable) then varname=variable;
MPRINT(EM_DIAGRAM):   if ^missing(variable) then varname=variable;
23180      else if ^missing(var_name) then varname=var_name;
MPRINT(EM_DIAGRAM):   else if ^missing(var_name) then varname=var_name;
23181      output;
MPRINT(EM_DIAGRAM):   output;
23182      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 161 observations read from the data set WORK.OUTPATH_TREE_0N3SVZL.
NOTE: The data set WORK.TEMP has 161 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23183      proc sort data=temp;
MPRINT(EM_DIAGRAM):   proc sort data=temp;
23184      by node;
MPRINT(EM_DIAGRAM):   by node;
23185      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 161 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 161 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23186      proc sort data=EMWS1.Clus6_OUTNODES out=outnodes;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS1.Clus6_OUTNODES out=outnodes;
23187      by node;
MPRINT(EM_DIAGRAM):   by node;
23188      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set EMWS1.CLUS6_OUTNODES.
NOTE: The data set WORK.OUTNODES has 61 observations and 22 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
23189      data temp;
MPRINT(EM_DIAGRAM):   data temp;
23190      merge temp(in=_a) outnodes(keep= node
23191      NPRIORS
23192      P__SEGMENT_3
23193      P__SEGMENT_2
23194      P__SEGMENT_1
23195      );
MPRINT(EM_DIAGRAM):   merge temp(in=_a) outnodes(keep= node NPRIORS P__SEGMENT_3 P__SEGMENT_2 P__SEGMENT_1 );
23196      by node;
MPRINT(EM_DIAGRAM):   by node;
23197      if _a;
MPRINT(EM_DIAGRAM):   if _a;
23198      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 161 observations read from the data set WORK.TEMP.
NOTE: There were 61 observations read from the data set WORK.OUTNODES.
NOTE: The data set WORK.TEMP has 161 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23199      proc sort data=temp;
MPRINT(EM_DIAGRAM):   proc sort data=temp;
23200      by node descending varname descending numeric_value;
MPRINT(EM_DIAGRAM):   by node descending varname descending numeric_value;
23201      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 161 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 161 observations and 12 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
23202      data _null_;
MPRINT(EM_DIAGRAM):   data _null_;
23203      file x;
MPRINT(EM_DIAGRAM):   file x;
23204      set temp;
MPRINT(EM_DIAGRAM):   set temp;
23205      by node descending varname;
MPRINT(EM_DIAGRAM):   by node descending varname;
23206      retain origvar oldnode string;
MPRINT(EM_DIAGRAM):   retain origvar oldnode string;
23207      length origvar $32 oldnode 8 string $200;
MPRINT(EM_DIAGRAM):   length origvar $32 oldnode 8 string $200;
23208      if _n_ = 1 then do;
MPRINT(EM_DIAGRAM):   if _n_ = 1 then do;
23209      origvar = varname;
MPRINT(EM_DIAGRAM):   origvar = varname;
23210      oldnode = node;
MPRINT(EM_DIAGRAM):   oldnode = node;
23211      end;
MPRINT(EM_DIAGRAM):   end;
23212      if first.node then do;
MPRINT(EM_DIAGRAM):   if first.node then do;
23213      put "&EM_CODEBAR";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
23214      put " Node = " node;
MPRINT(EM_DIAGRAM):   put " Node = " node;
23215      put "&EM_CODEBAR";
MPRINT(EM_DIAGRAM):   put "*------------------------------------------------------------*";
23216      end;
MPRINT(EM_DIAGRAM):   end;
23217      if first.varname then do;
MPRINT(EM_DIAGRAM):   if first.varname then do;
23218      if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
MPRINT(EM_DIAGRAM):   if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
23219      if MISSING(CHARACTER_VALUE) then do;
MPRINT(EM_DIAGRAM):   if MISSING(CHARACTER_VALUE) then do;
23220      if NUMERIC_VALUE ne . then do;
MPRINT(EM_DIAGRAM):   if NUMERIC_VALUE ne . then do;
23221      if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
23222      string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
MPRINT(EM_DIAGRAM):   string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
23223      end;
MPRINT(EM_DIAGRAM):   end;
23224      else do;
MPRINT(EM_DIAGRAM):   else do;
23225      string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
MPRINT(EM_DIAGRAM):   string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
23226      end;
MPRINT(EM_DIAGRAM):   end;
23227      end;
MPRINT(EM_DIAGRAM):   end;
23228      end;
MPRINT(EM_DIAGRAM):   end;
23229      else do;
MPRINT(EM_DIAGRAM):   else do;
23230      if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
23231      string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
MPRINT(EM_DIAGRAM):   string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
23232      end;
MPRINT(EM_DIAGRAM):   end;
23233      else do;
MPRINT(EM_DIAGRAM):   else do;
23234      string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
MPRINT(EM_DIAGRAM):   string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
23235      end;
MPRINT(EM_DIAGRAM):   end;
23236      end;
MPRINT(EM_DIAGRAM):   end;
23237      end;
MPRINT(EM_DIAGRAM):   end;
23238      else if RELATION in ("=") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("=") then do;
23239      if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
23240      string = "AND "||strip(varname) ||" IS ONE OF: "||character_value;
MPRINT(EM_DIAGRAM):   string = "AND "||strip(varname) ||" IS ONE OF: "||character_value;
23241      end;
MPRINT(EM_DIAGRAM):   end;
23242      else do;
MPRINT(EM_DIAGRAM):   else do;
23243      string = "if "|| strip(varname) ||" IS ONE OF: "||character_value;
MPRINT(EM_DIAGRAM):   string = "if "|| strip(varname) ||" IS ONE OF: "||character_value;
23244      end;
MPRINT(EM_DIAGRAM):   end;
23245      end;
MPRINT(EM_DIAGRAM):   end;
23246      else if RELATION in ("ISMISSING") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("ISMISSING") then do;
23247      if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
23248      string = " AND "|| strip(varname) || " equals Missing";
MPRINT(EM_DIAGRAM):   string = " AND "|| strip(varname) || " equals Missing";
23249      end;
MPRINT(EM_DIAGRAM):   end;
23250      else do;
MPRINT(EM_DIAGRAM):   else do;
23251      string = "if "|| strip(varname) ||" equals Missing";
MPRINT(EM_DIAGRAM):   string = "if "|| strip(varname) ||" equals Missing";
23252      end;
MPRINT(EM_DIAGRAM):   end;
23253      end;
MPRINT(EM_DIAGRAM):   end;
23254      else if RELATION in ("ISNOTMISSING") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("ISNOTMISSING") then do;
23255      if ^first.node then do;
MPRINT(EM_DIAGRAM):   if ^first.node then do;
23256      string = " AND "|| strip(varname) || " equals All Values";
MPRINT(EM_DIAGRAM):   string = " AND "|| strip(varname) || " equals All Values";
23257      end;
MPRINT(EM_DIAGRAM):   end;
23258      else do;
MPRINT(EM_DIAGRAM):   else do;
23259      string = "if "|| strip(varname) ||" equals All Values";
MPRINT(EM_DIAGRAM):   string = "if "|| strip(varname) ||" equals All Values";
23260      end;
MPRINT(EM_DIAGRAM):   end;
23261      end;
MPRINT(EM_DIAGRAM):   end;
23262      if ^missing(varname) then origvar = varname;
MPRINT(EM_DIAGRAM):   if ^missing(varname) then origvar = varname;
23263      oldnode=node;
MPRINT(EM_DIAGRAM):   oldnode=node;
23264      end;
MPRINT(EM_DIAGRAM):   end;
23265      else do;
MPRINT(EM_DIAGRAM):   else do;
23266      if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
MPRINT(EM_DIAGRAM):   if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
23267      if MISSING(CHARACTER_VALUE) then do;
MPRINT(EM_DIAGRAM):   if MISSING(CHARACTER_VALUE) then do;
23268      if NUMERIC_VALUE ne . then do;
MPRINT(EM_DIAGRAM):   if NUMERIC_VALUE ne . then do;
23269      if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
MPRINT(EM_DIAGRAM):   if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
23270      else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
MPRINT(EM_DIAGRAM):   else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
23271      end;
MPRINT(EM_DIAGRAM):   end;
23272      end;
MPRINT(EM_DIAGRAM):   end;
23273      else do;
MPRINT(EM_DIAGRAM):   else do;
23274      if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
MPRINT(EM_DIAGRAM):   if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
23275      else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
MPRINT(EM_DIAGRAM):   else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
23276      end;
MPRINT(EM_DIAGRAM):   end;
23277      end;
MPRINT(EM_DIAGRAM):   end;
23278      else if RELATION in ("=") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("=") then do;
23279      string = strip(string)||", "||strip(character_value);
MPRINT(EM_DIAGRAM):   string = strip(string)||", "||strip(character_value);
23280      end;
MPRINT(EM_DIAGRAM):   end;
23281      else if RELATION in ("ISMISSING") then do;
MPRINT(EM_DIAGRAM):   else if RELATION in ("ISMISSING") then do;
23282      end;
MPRINT(EM_DIAGRAM):   end;
23283      if ^missing(varname) then origvar = varname;
MPRINT(EM_DIAGRAM):   if ^missing(varname) then origvar = varname;
23284      oldnode=node;
MPRINT(EM_DIAGRAM):   oldnode=node;
23285      end;
MPRINT(EM_DIAGRAM):   end;
23286      if last.varname then do;
MPRINT(EM_DIAGRAM):   if last.varname then do;
23287      if RELATION in ("ISMISSING") then do;
MPRINT(EM_DIAGRAM):   if RELATION in ("ISMISSING") then do;
23288      if ^first.varname then do;
MPRINT(EM_DIAGRAM):   if ^first.varname then do;
23289      string = strip(string) || " or MISSING";
MPRINT(EM_DIAGRAM):   string = strip(string) || " or MISSING";
23290      end;
MPRINT(EM_DIAGRAM):   end;
23291      end;
MPRINT(EM_DIAGRAM):   end;
23292      put string;
MPRINT(EM_DIAGRAM):   put string;
23293      if ^missing(varname) then origvar = varname;
MPRINT(EM_DIAGRAM):   if ^missing(varname) then origvar = varname;
23294      oldnode=node;
MPRINT(EM_DIAGRAM):   oldnode=node;
23295      end;
MPRINT(EM_DIAGRAM):   end;
23296      if last.node then do;
MPRINT(EM_DIAGRAM):   if last.node then do;
23297      put "then ";
MPRINT(EM_DIAGRAM):   put "then ";
23298      put " Tree Node Identifier   = " node;
MPRINT(EM_DIAGRAM):   put " Tree Node Identifier   = " node;
23299      put " Number of Observations = " NPRIORS;
MPRINT(EM_DIAGRAM):   put " Number of Observations = " NPRIORS;
23300      put " Predicted: _SEGMENT_=3  = " P__SEGMENT_3;
MPRINT(EM_DIAGRAM):   put " Predicted: _SEGMENT_=3  = " P__SEGMENT_3;
23301      put " Predicted: _SEGMENT_=2  = " P__SEGMENT_2;
MPRINT(EM_DIAGRAM):   put " Predicted: _SEGMENT_=2  = " P__SEGMENT_2;
23302      put " Predicted: _SEGMENT_=1  = " P__SEGMENT_1;
MPRINT(EM_DIAGRAM):   put " Predicted: _SEGMENT_=1  = " P__SEGMENT_1;
23303      put " ";
MPRINT(EM_DIAGRAM):   put " ";
23304      if ^missing(varname) then origvar = varname;
MPRINT(EM_DIAGRAM):   if ^missing(varname) then origvar = varname;
23305      oldnode=node;
MPRINT(EM_DIAGRAM):   oldnode=node;
23306      end;
MPRINT(EM_DIAGRAM):   end;
23307      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      23222:67    23225:66    23269:108   23270:72
NOTE: The file X is:
      Filename=C:\Users\misil\Desktop\MIS\DM1_project\Workspaces\EMWS1\Clus6\ENGLISHRULES.txt,
      RECFM=V,LRECL=131068,File Size (bytes)=0,
      Last Modified=24 December 2017 09:57:15 o'clock,
      Create Time=22 December 2017 13:41:06 o'clock
 
NOTE: 378 records were written to the file X.
      The minimum record length was 1.
      The maximum record length was 70.
NOTE: There were 161 observations read from the data set WORK.TEMP.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23308      filename x;
MPRINT(EM_DIAGRAM):    filename x;
NOTE: Fileref X has been deassigned.
23309      /* belowtext */
23310      data templabel;
MPRINT(EM_DIAGRAM):    data templabel;
23311      set WORK.OUTRULES_TREE_0N3SVZL;
MPRINT(EM_DIAGRAM):   set WORK.OUTRULES_TREE_0N3SVZL;
23312      if ((ROLE="PRIMARY") AND (STAT ="LABEL"));
MPRINT(EM_DIAGRAM):   if ((ROLE="PRIMARY") AND (STAT ="LABEL"));
23313      rename character_value = belowtext;
MPRINT(EM_DIAGRAM):   rename character_value = belowtext;
23314      keep NODE character_value;
MPRINT(EM_DIAGRAM):   keep NODE character_value;
23315      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 561 observations read from the data set WORK.OUTRULES_TREE_0N3SVZL.
NOTE: The data set WORK.TEMPLABEL has 13 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23316      data tempvar;
MPRINT(EM_DIAGRAM):   data tempvar;
23317      set WORK.OUTRULES_TREE_0N3SVZL;
MPRINT(EM_DIAGRAM):   set WORK.OUTRULES_TREE_0N3SVZL;
23318      if ((ROLE="PRIMARY") AND (STAT="VARIABLE"));
MPRINT(EM_DIAGRAM):   if ((ROLE="PRIMARY") AND (STAT="VARIABLE"));
23319      keep NODE character_value;
MPRINT(EM_DIAGRAM):   keep NODE character_value;
23320      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 561 observations read from the data set WORK.OUTRULES_TREE_0N3SVZL.
NOTE: The data set WORK.TEMPVAR has 30 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23321      proc sort data=templabel;
MPRINT(EM_DIAGRAM):   proc sort data=templabel;
23322      by node;
MPRINT(EM_DIAGRAM):   by node;
23323      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 13 observations read from the data set WORK.TEMPLABEL.
NOTE: The data set WORK.TEMPLABEL has 13 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23324      proc sort data=tempvar;
MPRINT(EM_DIAGRAM):   proc sort data=tempvar;
23325      by node;
MPRINT(EM_DIAGRAM):   by node;
23326      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 30 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 30 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23327      data tempbelow;
MPRINT(EM_DIAGRAM):   data tempbelow;
23328      merge templabel tempvar;
MPRINT(EM_DIAGRAM):   merge templabel tempvar;
23329      by node;
MPRINT(EM_DIAGRAM):   by node;
23330      if missing(belowtext) then belowtext= character_value;
MPRINT(EM_DIAGRAM):   if missing(belowtext) then belowtext= character_value;
23331      keep node belowtext;
MPRINT(EM_DIAGRAM):   keep node belowtext;
23332      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 13 observations read from the data set WORK.TEMPLABEL.
NOTE: There were 30 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPBELOW has 30 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23333      proc sort data=tempbelow;
MPRINT(EM_DIAGRAM):   proc sort data=tempbelow;
23334      by node;
MPRINT(EM_DIAGRAM):   by node;
23335      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 30 observations read from the data set WORK.TEMPBELOW.
NOTE: The data set WORK.TEMPBELOW has 30 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23336      /* abovetext */
23337      data tempoutrules;
MPRINT(EM_DIAGRAM):   data tempoutrules;
23338      set WORK.OUTRULES_TREE_0N3SVZL;
MPRINT(EM_DIAGRAM):   set WORK.OUTRULES_TREE_0N3SVZL;
23339      if ((ROLE='PRIMARY') AND(STAT in ("INTERVAL", "ORDINAL", "NOMINAL")));
MPRINT(EM_DIAGRAM):   if ((ROLE='PRIMARY') AND(STAT in ("INTERVAL", "ORDINAL", "NOMINAL")));
23340      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 561 observations read from the data set WORK.OUTRULES_TREE_0N3SVZL.
NOTE: The data set WORK.TEMPOUTRULES has 30 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23341      proc sort data=tempoutrules;
MPRINT(EM_DIAGRAM):   proc sort data=tempoutrules;
23342      by node numeric_value;
MPRINT(EM_DIAGRAM):   by node numeric_value;
23343      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 30 observations read from the data set WORK.TEMPOUTRULES.
NOTE: The data set WORK.TEMPOUTRULES has 30 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
23344      data tempabove;
MPRINT(EM_DIAGRAM):   data tempabove;
23345      set tempoutrules(rename=(node=parent));
MPRINT(EM_DIAGRAM):   set tempoutrules(rename=(node=parent));
23346      by parent numeric_value;
MPRINT(EM_DIAGRAM):   by parent numeric_value;
23347      retain abovetext tempstring flag branch origval origchar;
MPRINT(EM_DIAGRAM):   retain abovetext tempstring flag branch origval origchar;
23348      *length abovetext tempstring origchar $45;
MPRINT(EM_DIAGRAM):   *length abovetext tempstring origchar $45;
23349      length abovetext $256;
MPRINT(EM_DIAGRAM):   length abovetext $256;
23350      length tempstring origchar $64;
MPRINT(EM_DIAGRAM):   length tempstring origchar $64;
23351      if STAT in ("INTERVAL", "ORDINAL") then do;
MPRINT(EM_DIAGRAM):   if STAT in ("INTERVAL", "ORDINAL") then do;
23352      if first.parent then do;
MPRINT(EM_DIAGRAM):   if first.parent then do;
23353      if missing(character_value) then do;
MPRINT(EM_DIAGRAM):   if missing(character_value) then do;
23354      numeric_value = round(numeric_value, 0.0001);
MPRINT(EM_DIAGRAM):   numeric_value = round(numeric_value, 0.0001);
23355      abovetext = "< "||strip(NUMERIC_VALUE);
MPRINT(EM_DIAGRAM):   abovetext = "< "||strip(NUMERIC_VALUE);
23356      branch = 1;
MPRINT(EM_DIAGRAM):   branch = 1;
23357      origval = numeric_value;
MPRINT(EM_DIAGRAM):   origval = numeric_value;
23358      output;
MPRINT(EM_DIAGRAM):   output;
23359      end;
MPRINT(EM_DIAGRAM):   end;
23360      else do;
MPRINT(EM_DIAGRAM):   else do;
23361      abovetext = "< "||strip(CHARACTER_VALUE);
MPRINT(EM_DIAGRAM):   abovetext = "< "||strip(CHARACTER_VALUE);
23362      branch = 1;
MPRINT(EM_DIAGRAM):   branch = 1;
23363      origchar = character_value;
MPRINT(EM_DIAGRAM):   origchar = character_value;
23364      output;
MPRINT(EM_DIAGRAM):   output;
23365      end;
MPRINT(EM_DIAGRAM):   end;
23366      if first.parent AND last.parent then do;
MPRINT(EM_DIAGRAM):   if first.parent AND last.parent then do;
23367      if missing(character_value) then do;
MPRINT(EM_DIAGRAM):   if missing(character_value) then do;
23368      numeric_value = round(numeric_value, 0.0001);
MPRINT(EM_DIAGRAM):   numeric_value = round(numeric_value, 0.0001);
23369      branch = branch + 1;
MPRINT(EM_DIAGRAM):   branch = branch + 1;
23370      abovetext = ">= "||strip(NUMERIC_VALUE);
MPRINT(EM_DIAGRAM):   abovetext = ">= "||strip(NUMERIC_VALUE);
23371      output;
MPRINT(EM_DIAGRAM):   output;
23372      end;
MPRINT(EM_DIAGRAM):   end;
23373      else do;
MPRINT(EM_DIAGRAM):   else do;
23374      branch = branch + 1;
MPRINT(EM_DIAGRAM):   branch = branch + 1;
23375      abovetext = ">= "||strip(CHARACTER_VALUE);
MPRINT(EM_DIAGRAM):   abovetext = ">= "||strip(CHARACTER_VALUE);
23376      output;
MPRINT(EM_DIAGRAM):   output;
23377      end;
MPRINT(EM_DIAGRAM):   end;
23378      end;
MPRINT(EM_DIAGRAM):   end;
23379      end;
MPRINT(EM_DIAGRAM):   end;
23380      else if last.parent then do;
MPRINT(EM_DIAGRAM):   else if last.parent then do;
23381      if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
MPRINT(EM_DIAGRAM):   if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
23382      if missing(character_value) then do;
MPRINT(EM_DIAGRAM):   if missing(character_value) then do;
23383      numeric_value = round(numeric_value, 0.0001);
MPRINT(EM_DIAGRAM):   numeric_value = round(numeric_value, 0.0001);
23384      abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
MPRINT(EM_DIAGRAM):   abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
23385      end;
MPRINT(EM_DIAGRAM):   end;
23386      else do;
MPRINT(EM_DIAGRAM):   else do;
23387      abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
MPRINT(EM_DIAGRAM):   abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
23388      end;
MPRINT(EM_DIAGRAM):   end;
23389      branch = branch + 1;
MPRINT(EM_DIAGRAM):   branch = branch + 1;
23390      output;
MPRINT(EM_DIAGRAM):   output;
23391      if missing(character_value) then do;
MPRINT(EM_DIAGRAM):   if missing(character_value) then do;
23392      numeric_value = round(numeric_value, 0.0001);
MPRINT(EM_DIAGRAM):   numeric_value = round(numeric_value, 0.0001);
23393      abovetext = ">= "||strip(NUMERIC_VALUE);
MPRINT(EM_DIAGRAM):   abovetext = ">= "||strip(NUMERIC_VALUE);
23394      end;
MPRINT(EM_DIAGRAM):   end;
23395      else do;
MPRINT(EM_DIAGRAM):   else do;
23396      abovetext = ">= "||strip(CHARACTER_VALUE);
MPRINT(EM_DIAGRAM):   abovetext = ">= "||strip(CHARACTER_VALUE);
23397      end;
MPRINT(EM_DIAGRAM):   end;
23398      branch = branch + 1;
MPRINT(EM_DIAGRAM):   branch = branch + 1;
23399      output;
MPRINT(EM_DIAGRAM):   output;
23400      end;
MPRINT(EM_DIAGRAM):   end;
23401      else do;
MPRINT(EM_DIAGRAM):   else do;
23402      if missing(character_value) then do;
MPRINT(EM_DIAGRAM):   if missing(character_value) then do;
23403      numeric_value = round(numeric_value, 0.0001);
MPRINT(EM_DIAGRAM):   numeric_value = round(numeric_value, 0.0001);
23404      abovetext = ">= "||strip(NUMERIC_VALUE);
MPRINT(EM_DIAGRAM):   abovetext = ">= "||strip(NUMERIC_VALUE);
23405      end;
MPRINT(EM_DIAGRAM):   end;
23406      else do;
MPRINT(EM_DIAGRAM):   else do;
23407      abovetext = ">= "||strip(CHARACTER_VALUE);
MPRINT(EM_DIAGRAM):   abovetext = ">= "||strip(CHARACTER_VALUE);
23408      end;
MPRINT(EM_DIAGRAM):   end;
23409      branch = branch + 1;
MPRINT(EM_DIAGRAM):   branch = branch + 1;
23410      output;
MPRINT(EM_DIAGRAM):   output;
23411      end;
MPRINT(EM_DIAGRAM):   end;
23412      end;
MPRINT(EM_DIAGRAM):   end;
23413      else do;
MPRINT(EM_DIAGRAM):   else do;
23414      if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
MPRINT(EM_DIAGRAM):   if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
23415      if missing(character_value) then do;
MPRINT(EM_DIAGRAM):   if missing(character_value) then do;
23416      numeric_value = round(numeric_value,0.0001);
MPRINT(EM_DIAGRAM):   numeric_value = round(numeric_value,0.0001);
23417      abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
MPRINT(EM_DIAGRAM):   abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
23418      origval = numeric_value;
MPRINT(EM_DIAGRAM):   origval = numeric_value;
23419      end;
MPRINT(EM_DIAGRAM):   end;
23420      else do;
MPRINT(EM_DIAGRAM):   else do;
23421      abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
MPRINT(EM_DIAGRAM):   abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
23422      origchar = character_value;
MPRINT(EM_DIAGRAM):   origchar = character_value;
23423      end;
MPRINT(EM_DIAGRAM):   end;
23424      branch = branch + 1;
MPRINT(EM_DIAGRAM):   branch = branch + 1;
23425      output;
MPRINT(EM_DIAGRAM):   output;
23426      end;
MPRINT(EM_DIAGRAM):   end;
23427      else do;
MPRINT(EM_DIAGRAM):   else do;
23428      if missing(character_value) then do;
MPRINT(EM_DIAGRAM):   if missing(character_value) then do;
23429      numeric_value = round(numeric_value, 0.0001);
MPRINT(EM_DIAGRAM):   numeric_value = round(numeric_value, 0.0001);
23430      abovetext = ">= "||strip(NUMERIC_VALUE);
MPRINT(EM_DIAGRAM):   abovetext = ">= "||strip(NUMERIC_VALUE);
23431      origval = numeric_value;
MPRINT(EM_DIAGRAM):   origval = numeric_value;
23432      end;
MPRINT(EM_DIAGRAM):   end;
23433      else do;
MPRINT(EM_DIAGRAM):   else do;
23434      abovetext = ">= "||strip(CHARACTER_VALUE);
MPRINT(EM_DIAGRAM):   abovetext = ">= "||strip(CHARACTER_VALUE);
23435      origval = character_value;
MPRINT(EM_DIAGRAM):   origval = character_value;
23436      end;
MPRINT(EM_DIAGRAM):   end;
23437      branch = branch + 1;
MPRINT(EM_DIAGRAM):   branch = branch + 1;
23438      output;
MPRINT(EM_DIAGRAM):   output;
23439      end;
MPRINT(EM_DIAGRAM):   end;
23440      end;
MPRINT(EM_DIAGRAM):   end;
23441      end;
MPRINT(EM_DIAGRAM):   end;
23442      else do;
MPRINT(EM_DIAGRAM):   else do;
23443      if first.numeric_value then do;
MPRINT(EM_DIAGRAM):   if first.numeric_value then do;
23444      flag = 0;
MPRINT(EM_DIAGRAM):   flag = 0;
23445      abovetext = CHARACTER_VALUE;
MPRINT(EM_DIAGRAM):   abovetext = CHARACTER_VALUE;
23446      branch = numeric_value;
MPRINT(EM_DIAGRAM):   branch = numeric_value;
23447      if first.numeric_value AND last.numeric_value then do;
MPRINT(EM_DIAGRAM):   if first.numeric_value AND last.numeric_value then do;
23448      output;
MPRINT(EM_DIAGRAM):   output;
23449      end;
MPRINT(EM_DIAGRAM):   end;
23450      end;
MPRINT(EM_DIAGRAM):   end;
23451      else if last.numeric_value then do;
MPRINT(EM_DIAGRAM):   else if last.numeric_value then do;
23452      if flag=0 then do;
MPRINT(EM_DIAGRAM):   if flag=0 then do;
23453      tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
MPRINT(EM_DIAGRAM):   tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
23454      length = length(strip(tempstring));
MPRINT(EM_DIAGRAM):   length = length(strip(tempstring));
23455      if length < 32 then do;
MPRINT(EM_DIAGRAM):   if length < 32 then do;
23456      abovetext = strip(tempstring);
MPRINT(EM_DIAGRAM):   abovetext = strip(tempstring);
23457      end;
MPRINT(EM_DIAGRAM):   end;
23458      else do;
MPRINT(EM_DIAGRAM):   else do;
23459      abovetext = strip(abovetext)||", ...";
MPRINT(EM_DIAGRAM):   abovetext = strip(abovetext)||", ...";
23460      flag = 1;
MPRINT(EM_DIAGRAM):   flag = 1;
23461      end;
MPRINT(EM_DIAGRAM):   end;
23462      end;
MPRINT(EM_DIAGRAM):   end;
23463      branch = numeric_value;
MPRINT(EM_DIAGRAM):   branch = numeric_value;
23464      output;
MPRINT(EM_DIAGRAM):   output;
23465      end;
MPRINT(EM_DIAGRAM):   end;
23466      else do;
MPRINT(EM_DIAGRAM):   else do;
23467      if flag=0 then do;
MPRINT(EM_DIAGRAM):   if flag=0 then do;
23468      tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
MPRINT(EM_DIAGRAM):   tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
23469      length = length(strip(tempstring));
MPRINT(EM_DIAGRAM):   length = length(strip(tempstring));
23470      if length < 32 then do;
MPRINT(EM_DIAGRAM):   if length < 32 then do;
23471      abovetext = strip(tempstring);
MPRINT(EM_DIAGRAM):   abovetext = strip(tempstring);
23472      end;
MPRINT(EM_DIAGRAM):   end;
23473      else do;
MPRINT(EM_DIAGRAM):   else do;
23474      abovetext = strip(abovetext)||", ...";
MPRINT(EM_DIAGRAM):   abovetext = strip(abovetext)||", ...";
23475      flag=1;
MPRINT(EM_DIAGRAM):   flag=1;
23476      end;
MPRINT(EM_DIAGRAM):   end;
23477      end;
MPRINT(EM_DIAGRAM):   end;
23478      branch = numeric_value;
MPRINT(EM_DIAGRAM):   branch = numeric_value;
23479      end;
MPRINT(EM_DIAGRAM):   end;
23480      end;
MPRINT(EM_DIAGRAM):   end;
23481      keep parent branch abovetext;
MPRINT(EM_DIAGRAM):   keep parent branch abovetext;
23482      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      23355:25   23370:26   23384:24   23384:47   23393:26   23404:26   23417:24   23417:47   23430:26
NOTE: Character values have been converted to numeric values at the places given by: (Line):(Column).
      23435:11
NOTE: There were 30 observations read from the data set WORK.TEMPOUTRULES.
NOTE: The data set WORK.TEMPABOVE has 60 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
23483      /* MIssing value to abovetext */
23484      data tempmissing;
MPRINT(EM_DIAGRAM):   data tempmissing;
23485      set WORK.OUTRULES_TREE_0N3SVZL;
MPRINT(EM_DIAGRAM):   set WORK.OUTRULES_TREE_0N3SVZL;
23486      if ((ROLE="PRIMARY") AND (STAT in ("MISSING")));
MPRINT(EM_DIAGRAM):   if ((ROLE="PRIMARY") AND (STAT in ("MISSING")));
23487      rename node=parent numeric_value=branch character_value=misschar;
MPRINT(EM_DIAGRAM):   rename node=parent numeric_value=branch character_value=misschar;
23488      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 561 observations read from the data set WORK.OUTRULES_TREE_0N3SVZL.
NOTE: The data set WORK.TEMPMISSING has 30 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23489      proc sort data=work.tempabove;
MPRINT(EM_DIAGRAM):   proc sort data=work.tempabove;
23490      by parent branch;
MPRINT(EM_DIAGRAM):   by parent branch;
23491      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 60 observations read from the data set WORK.TEMPABOVE.
NOTE: The data set WORK.TEMPABOVE has 60 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23492      proc sort data=EMWS1.Clus6_OUTNODES out=tempoutnodes;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS1.Clus6_OUTNODES out=tempoutnodes;
23493      by parent branch;
MPRINT(EM_DIAGRAM):   by parent branch;
23494      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set EMWS1.CLUS6_OUTNODES.
NOTE: The data set WORK.TEMPOUTNODES has 61 observations and 22 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
23495      proc sort data=tempmissing;
MPRINT(EM_DIAGRAM):   proc sort data=tempmissing;
23496      by parent branch;
MPRINT(EM_DIAGRAM):   by parent branch;
23497      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 30 observations read from the data set WORK.TEMPMISSING.
NOTE: The data set WORK.TEMPMISSING has 30 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
23498      data WORK.Clus6_outnodes;
MPRINT(EM_DIAGRAM):   data WORK.Clus6_outnodes;
23499      merge work.tempabove tempoutNodes(drop=abovetext ) tempmissing(in=_a);
MPRINT(EM_DIAGRAM):   merge work.tempabove tempoutNodes(drop=abovetext ) tempmissing(in=_a);
23500      by parent branch;
MPRINT(EM_DIAGRAM):   by parent branch;
23501      length traintotal validtotal 8;
MPRINT(EM_DIAGRAM):   length traintotal validtotal 8;
23502      retain traintotal validtotal;
MPRINT(EM_DIAGRAM):   retain traintotal validtotal;
23503      if _a then do;
MPRINT(EM_DIAGRAM):   if _a then do;
23504      if ^MISSING(abovetext) then do;
MPRINT(EM_DIAGRAM):   if ^MISSING(abovetext) then do;
23505      abovetext= strip(abovetext)||" %sysfunc(sasmsg(sashelp.dmine, tree_ormiss_vlabel, noquote))";
MPRINT(EM_DIAGRAM):   abovetext= strip(abovetext)||" Or Missing";
23506      end;
MPRINT(EM_DIAGRAM):   end;
23507      else do;
MPRINT(EM_DIAGRAM):   else do;
23508      abovetext = " %sysfunc(sasmsg(sashelp.dmine, tree_missonly_vlabel, noquote))";
MPRINT(EM_DIAGRAM):   abovetext = " Missing Values Only";
23509      end;
MPRINT(EM_DIAGRAM):   end;
23510      end;
MPRINT(EM_DIAGRAM):   end;
23511      if MISSING(abovetext) then abovetext="%sysfunc(sasmsg(sashelp.dmine, tree_nonmiss_vlabel, noquote))";
MPRINT(EM_DIAGRAM):   if MISSING(abovetext) then abovetext="Non-Missing Values";
23512      if node=1 then do;
MPRINT(EM_DIAGRAM):   if node=1 then do;
23513      traintotal = N;
MPRINT(EM_DIAGRAM):   traintotal = N;
23514      validtotal=VN;
MPRINT(EM_DIAGRAM):   validtotal=VN;
23515      end;
MPRINT(EM_DIAGRAM):   end;
23516      label traintotal = "%sysfunc(sasmsg(sashelp.dmine,  rpt_traintotal_vlabel, noquote))";
MPRINT(EM_DIAGRAM):   label traintotal = "Train Total";
23517      drop role rank stat misschar belowtext;
MPRINT(EM_DIAGRAM):   drop role rank stat misschar belowtext;
23518      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Variable VN is uninitialized.
NOTE: There were 60 observations read from the data set WORK.TEMPABOVE.
NOTE: There were 61 observations read from the data set WORK.TEMPOUTNODES.
NOTE: There were 30 observations read from the data set WORK.TEMPMISSING.
NOTE: The data set WORK.CLUS6_OUTNODES has 61 observations and 24 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
23519      proc sort data=WORK.Clus6_outnodes;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.Clus6_outnodes;
23520      by node;
MPRINT(EM_DIAGRAM):   by node;
23521      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set WORK.CLUS6_OUTNODES.
NOTE: The data set WORK.CLUS6_OUTNODES has 61 observations and 24 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23522      proc sort data=tempbelow;
MPRINT(EM_DIAGRAM):   proc sort data=tempbelow;
23523      by node;
MPRINT(EM_DIAGRAM):   by node;
23524      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Input data set is already sorted, no sorting done.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23525      data WORK.Clus6_outnodes;
MPRINT(EM_DIAGRAM):   data WORK.Clus6_outnodes;
23526      merge WORK.Clus6_outnodes tempbelow;
MPRINT(EM_DIAGRAM):   merge WORK.Clus6_outnodes tempbelow;
23527      by node;
MPRINT(EM_DIAGRAM):   by node;
23528      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set WORK.CLUS6_OUTNODES.
NOTE: There were 30 observations read from the data set WORK.TEMPBELOW.
NOTE: The data set WORK.CLUS6_OUTNODES has 61 observations and 25 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: There were 10296 observations read from the data set A2Z_INSU.A2Z_INSURANCE.
NOTE: There were 10296 observations read from the data set EMWS1.IDS_DATA.
NOTE: There were 10296 observations read from the data set EMWS1.IMPT_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS2_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS3_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.DROP2_TRAIN.
NOTE: There were 10266 observations read from the data set EMWS1.FILTER4_TRAIN.
NOTE: View EMWS1.EM_CLUS6.VIEW used (Total process time):
      real time           0.28 seconds
      cpu time            0.26 seconds
 
NOTE: There were 10266 observations read from the data set EMWS1.CLUS6_TRAIN.
23529      data tempoutstats;
MPRINT(EM_DIAGRAM):    data tempoutstats;
23530      set WORK.OUTSTATS_TREE_0N3SVZL;
MPRINT(EM_DIAGRAM):   set WORK.OUTSTATS_TREE_0N3SVZL;
23531      length tarlevel $8;
MPRINT(EM_DIAGRAM):   length tarlevel $8;
23532      tarlevel ="NOMINAL";
MPRINT(EM_DIAGRAM):   tarlevel ="NOMINAL";
23533      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 305 observations read from the data set WORK.OUTSTATS_TREE_0N3SVZL.
NOTE: The data set WORK.TEMPOUTSTATS has 305 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
23534      data EMWS1.Clus6_TREE_PLOT;
MPRINT(EM_DIAGRAM):    data EMWS1.Clus6_TREE_PLOT;
23535      length NODETEXT TEXTALL $800 N NODECOLOR 8;
MPRINT(EM_DIAGRAM):   length NODETEXT TEXTALL $800 N NODECOLOR 8;
23536      set WORK.Clus6_outnodes;
MPRINT(EM_DIAGRAM):   set WORK.Clus6_outnodes;
23537      label parent = "%sysfunc(sasmsg(sashelp.dmine, rpt_parentID_vlabel, noquote))" depth = "%sysfunc(sasmsg(sashelp.dmine, rpt_depth_vlabel, noquote))" belowtext= "%sysfunc(sasmsg(sashelp.dmine, rpt_belowtext_vlabel, noquote))" abovetext =
23538         "%sysfunc(sasmsg(sashelp.dmine, rpt_abovetext_vlabel, noquote))" linkwidth = "%sysfunc(sasmsg(sashelp.dmine, rpt_linkwidth_vlabel, noquote))" nodetext = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodetext_vlabel, noquote))" textall =
23539         "%sysfunc(sasmsg(sashelp.dmine, rpt_textall_vlabel, noquote))" N = "%sysfunc(sasmsg(sashelp.dmine, rpt_trainn_vlabel, noquote))" nodecolor = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodecolor_vlabel, noquote))" node =
23540         "%sysfunc(sasmsg(sashelp.dmine, rpt_node_vlabel, noquote))";
MPRINT(EM_DIAGRAM):   label parent = "Parent Id" depth = "Depth" belowtext= "Below Text" abovetext = "Above Text" linkwidth = "Link Width" nodetext = "Node Text" textall = "All Text" N = "Train: Number of Observations" nodecolor = "Node Color" node =
"Node";
23541      keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR;
MPRINT(EM_DIAGRAM):   keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR;
23542      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Variable TEXTALL is uninitialized.
NOTE: Variable NODECOLOR is uninitialized.
NOTE: There were 61 observations read from the data set WORK.CLUS6_OUTNODES.
NOTE: The data set EMWS1.CLUS6_TREE_PLOT has 61 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
 
23543      proc sort data=EMWS1.Clus6_TREE_PLOT;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS1.Clus6_TREE_PLOT;
23544      by node;
MPRINT(EM_DIAGRAM):   by node;
23545      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set EMWS1.CLUS6_TREE_PLOT.
NOTE: The data set EMWS1.CLUS6_TREE_PLOT has 61 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23546      proc sort data=tempoutstats;
MPRINT(EM_DIAGRAM):   proc sort data=tempoutstats;
23547      by node;
MPRINT(EM_DIAGRAM):   by node;
23548      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 305 observations read from the data set WORK.TEMPOUTSTATS.
NOTE: The data set WORK.TEMPOUTSTATS has 305 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23549      data EMWS1.Clus6_TREE_PLOT;
MPRINT(EM_DIAGRAM):    data EMWS1.Clus6_TREE_PLOT;
23550      merge EMWS1.Clus6_TREE_PLOT tempoutstats;
MPRINT(EM_DIAGRAM):   merge EMWS1.Clus6_TREE_PLOT tempoutstats;
23551      length text $800 _RASE_ P__SEGMENT_3 8;
MPRINT(EM_DIAGRAM):   length text $800 _RASE_ P__SEGMENT_3 8;
23552      retain P__SEGMENT_3 eventlevel;
MPRINT(EM_DIAGRAM):   retain P__SEGMENT_3 eventlevel;
23553      by node;
MPRINT(EM_DIAGRAM):   by node;
23554      if statname='N' then N=statvalue;
MPRINT(EM_DIAGRAM):   if statname='N' then N=statvalue;
23555      if statname='NPRIORS' then N=statvalue;
MPRINT(EM_DIAGRAM):   if statname='NPRIORS' then N=statvalue;
23556      if statname='PREDICTION' then eventlevel=category;
MPRINT(EM_DIAGRAM):   if statname='PREDICTION' then eventlevel=category;
23557      _RASE_ = .;
MPRINT(EM_DIAGRAM):   _RASE_ = .;
23558      if tarlevel ^= 'INTERVAL' then do;
MPRINT(EM_DIAGRAM):   if tarlevel ^= 'INTERVAL' then do;
23559      if STATNAME = 'PROBABILITY' then do;
MPRINT(EM_DIAGRAM):   if STATNAME = 'PROBABILITY' then do;
23560      if CATEGORY=EVENTLEVEL then do;
MPRINT(EM_DIAGRAM):   if CATEGORY=EVENTLEVEL then do;
23561      nodetext = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
MPRINT(EM_DIAGRAM):   nodetext = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
23562      text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
MPRINT(EM_DIAGRAM):   text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
23563      P__SEGMENT_3 = round(STATVALUE, .01);
MPRINT(EM_DIAGRAM):   P__SEGMENT_3 = round(STATVALUE, .01);
23564      end;
MPRINT(EM_DIAGRAM):   end;
23565      else do;
MPRINT(EM_DIAGRAM):   else do;
23566      text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
MPRINT(EM_DIAGRAM):   text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
23567      end;
MPRINT(EM_DIAGRAM):   end;
23568      textall = strip(textall)||'0A'x||strip( text);
MPRINT(EM_DIAGRAM):   textall = strip(textall)||'0A'x||strip( text);
23569      end;
MPRINT(EM_DIAGRAM):   end;
23570      if last.node then do;
MPRINT(EM_DIAGRAM):   if last.node then do;
23571      nodetext = trim(nodetext)||'0A'x||" %sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
MPRINT(EM_DIAGRAM):   nodetext = trim(nodetext)||'0A'x||" Count:"|| put(N, 13.);
23572      textall = trim(textall)||'0A'x||" %sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
MPRINT(EM_DIAGRAM):   textall = trim(textall)||'0A'x||" Count:"|| put(N, 13.);
23573      output EMWS1.Clus6_TREE_PLOT;
MPRINT(EM_DIAGRAM):   output EMWS1.Clus6_TREE_PLOT;
23574      end;
MPRINT(EM_DIAGRAM):   end;
23575      end;
MPRINT(EM_DIAGRAM):   end;
23576      else do;
MPRINT(EM_DIAGRAM):   else do;
23577      if statname='RASE' then _RASE_=statvalue;
MPRINT(EM_DIAGRAM):   if statname='RASE' then _RASE_=statvalue;
23578      label _RASE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_trase_vlabel, noquote))";
MPRINT(EM_DIAGRAM):   label _RASE_ = "Train: Root Average Square Error";
23579      if STATNAME = 'PREDICTION' then do;
MPRINT(EM_DIAGRAM):   if STATNAME = 'PREDICTION' then do;
23580      nodetext= "%sysfunc(sasmsg(sashelp.dmine, rpt_average_vlabel, noquote))"|| put(STATVALUE, 13.4)||'0A'x|| "%sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
MPRINT(EM_DIAGRAM):   nodetext= "Average"|| put(STATVALUE, 13.4)||'0A'x|| "Count:"|| put(N, 13.);
23581      textall = nodetext;
MPRINT(EM_DIAGRAM):   textall = nodetext;
23582      P__SEGMENT_3 = STATVALUE;
MPRINT(EM_DIAGRAM):   P__SEGMENT_3 = STATVALUE;
23583      ;
MPRINT(EM_DIAGRAM):   ;
23584      ;
MPRINT(EM_DIAGRAM):   ;
23585      end;
MPRINT(EM_DIAGRAM):   end;
23586      if last.node then do;
MPRINT(EM_DIAGRAM):   if last.node then do;
23587      output EMWS1.Clus6_TREE_PLOT;
MPRINT(EM_DIAGRAM):   output EMWS1.Clus6_TREE_PLOT;
23588      end;
MPRINT(EM_DIAGRAM):   end;
23589      ;
MPRINT(EM_DIAGRAM):   ;
23590      end;
MPRINT(EM_DIAGRAM):   end;
23591      label P__SEGMENT_3 = "%sysfunc(sasmsg(sashelp.dmine, rpt_predictedvar_vlabel, noquote))";
MPRINT(EM_DIAGRAM):   label P__SEGMENT_3 = "Predicted Variable";
23592      keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR _RASE_ P__SEGMENT_3;
MPRINT(EM_DIAGRAM):   keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR _RASE_ P__SEGMENT_3;
23593      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set EMWS1.CLUS6_TREE_PLOT.
NOTE: There were 305 observations read from the data set WORK.TEMPOUTSTATS.
NOTE: The data set EMWS1.CLUS6_TREE_PLOT has 61 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
23594      data tempcolor;
MPRINT(EM_DIAGRAM):   data tempcolor;
23595      set WORK.OUTSTATS_TREE_0N3SVZL;
MPRINT(EM_DIAGRAM):   set WORK.OUTSTATS_TREE_0N3SVZL;
23596      retain eventlevel;
MPRINT(EM_DIAGRAM):   retain eventlevel;
23597      if STATNAME='PREDICTION' then eventlevel=CATEGORY;
MPRINT(EM_DIAGRAM):   if STATNAME='PREDICTION' then eventlevel=CATEGORY;
23598      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 305 observations read from the data set WORK.OUTSTATS_TREE_0N3SVZL.
NOTE: The data set WORK.TEMPCOLOR has 305 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
23599      data tempcolor;
MPRINT(EM_DIAGRAM):   data tempcolor;
23600      set tempcolor;
MPRINT(EM_DIAGRAM):   set tempcolor;
23601      if 'NOMINAL' ne 'INTERVAL' then do;
MPRINT(EM_DIAGRAM):   if 'NOMINAL' ne 'INTERVAL' then do;
23602      if CATEGORY=EVENTLEVEL AND STATNAME="PROBABILITY";
MPRINT(EM_DIAGRAM):   if CATEGORY=EVENTLEVEL AND STATNAME="PROBABILITY";
23603      end;
MPRINT(EM_DIAGRAM):   end;
23604      else do;
MPRINT(EM_DIAGRAM):   else do;
23605      if STATNAME="PREDICTION";
MPRINT(EM_DIAGRAM):   if STATNAME="PREDICTION";
23606      end;
MPRINT(EM_DIAGRAM):   end;
23607      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 305 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 61 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
23608      data tempcolor;
MPRINT(EM_DIAGRAM):   data tempcolor;
23609      set tempcolor;
MPRINT(EM_DIAGRAM):   set tempcolor;
23610      length nodecolor 8;
MPRINT(EM_DIAGRAM):   length nodecolor 8;
23611      if 'NOMINAL' ne 'INTERVAL' then do;
MPRINT(EM_DIAGRAM):   if 'NOMINAL' ne 'INTERVAL' then do;
23612      nodecolor = round(100*(STATVALUE), .01);
MPRINT(EM_DIAGRAM):   nodecolor = round(100*(STATVALUE), .01);
23613      end;
MPRINT(EM_DIAGRAM):   end;
23614      else do;
MPRINT(EM_DIAGRAM):   else do;
23615      nodecolor=round(statvalue, .01);
MPRINT(EM_DIAGRAM):   nodecolor=round(statvalue, .01);
23616      end;
MPRINT(EM_DIAGRAM):   end;
23617      keep node nodecolor;
MPRINT(EM_DIAGRAM):   keep node nodecolor;
23618      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 61 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23619      proc sort data=EMWS1.Clus6_TREE_PLOT;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS1.Clus6_TREE_PLOT;
23620      by node;
MPRINT(EM_DIAGRAM):   by node;
23621      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set EMWS1.CLUS6_TREE_PLOT.
NOTE: The data set EMWS1.CLUS6_TREE_PLOT has 61 observations and 12 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23622      proc sort data=tempcolor;
MPRINT(EM_DIAGRAM):   proc sort data=tempcolor;
23623      by node;
MPRINT(EM_DIAGRAM):   by node;
23624      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 61 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23625      data EMWS1.Clus6_TREE_PLOT;
MPRINT(EM_DIAGRAM):   data EMWS1.Clus6_TREE_PLOT;
23626      merge EMWS1.Clus6_TREE_PLOT tempcolor;
MPRINT(EM_DIAGRAM):   merge EMWS1.Clus6_TREE_PLOT tempcolor;
23627      by node;
MPRINT(EM_DIAGRAM):   by node;
23628      length traintotal 8;
MPRINT(EM_DIAGRAM):   length traintotal 8;
23629      retain traintotal;
MPRINT(EM_DIAGRAM):   retain traintotal;
23630      label traintotal = "%sysfunc(sasmsg(sashelp.dmine,  rpt_traintotal_vlabel, noquote))";
MPRINT(EM_DIAGRAM):   label traintotal = "Train Total";
23631      if node=1 then do;
MPRINT(EM_DIAGRAM):   if node=1 then do;
23632      traintotal = N;
MPRINT(EM_DIAGRAM):   traintotal = N;
23633      end;
MPRINT(EM_DIAGRAM):   end;
23634      if NODE eq . then delete;
MPRINT(EM_DIAGRAM):   if NODE eq . then delete;
23635      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set EMWS1.CLUS6_TREE_PLOT.
NOTE: There were 61 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set EMWS1.CLUS6_TREE_PLOT has 61 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
23636      data EMWS1.Clus6_TREE_PLOT;
MPRINT(EM_DIAGRAM):   data EMWS1.Clus6_TREE_PLOT;
23637      set EMWS1.Clus6_TREE_PLOT;
MPRINT(EM_DIAGRAM):   set EMWS1.Clus6_TREE_PLOT;
23638      textall = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodeId_vlabel, noquote, )):"|| put(Node, 13.)||'0A'x||trim(textall);
MPRINT(EM_DIAGRAM):   textall = "Node Id:"|| put(Node, 13.)||'0A'x||trim(textall);
23639      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set EMWS1.CLUS6_TREE_PLOT.
NOTE: The data set EMWS1.CLUS6_TREE_PLOT has 61 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
23640      data tempout;
MPRINT(EM_DIAGRAM):   data tempout;
23641      set WORK.Clus6_outnodes;
MPRINT(EM_DIAGRAM):   set WORK.Clus6_outnodes;
23642      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set WORK.CLUS6_OUTNODES.
NOTE: The data set WORK.TEMPOUT has 61 observations and 25 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
 
 
23643      proc sort data=tempout;
MPRINT(EM_DIAGRAM):   proc sort data=tempout;
23644      by descending P__SEGMENT_3;
MPRINT(EM_DIAGRAM):   by descending P__SEGMENT_3;
23645      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set WORK.TEMPOUT.
NOTE: The data set WORK.TEMPOUT has 61 observations and 25 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
 
 
23646      data tree_temp;
MPRINT(EM_DIAGRAM):   data tree_temp;
23647      set tempout;
MPRINT(EM_DIAGRAM):   set tempout;
23648      if LEAF ne .;
MPRINT(EM_DIAGRAM):   if LEAF ne .;
23649      label index="%sysfunc(sasmsg(sashelp.dmine, rpt_leafindex_vlabel  , NOQUOTE))";
MPRINT(EM_DIAGRAM):   label index= "Leaf Index";
23650      label percevent_train = "%sysfunc(sasmsg(sashelp.dmine, rpt_perc_train_vlabel  , NOQUOTE))";
MPRINT(EM_DIAGRAM):   label percevent_train = "Percent Cases";
23651      label perc_train = "%sysfunc(sasmsg(sashelp.dmine, rpt_percevent_train_vlabel  , NOQUOTE))";
MPRINT(EM_DIAGRAM):   label perc_train = "Event Percentage";
23652      label tprob="%sysfunc(sasmsg(sashelp.dmine, rpt_prob_vlabel  , NOQUOTE, %nrbquote()))";
MPRINT(EM_DIAGRAM):   label tprob= "Training Percent ";
23653      tprob = round(P__SEGMENT_3, .01);
MPRINT(EM_DIAGRAM):   tprob = round(P__SEGMENT_3, .01);
23654      percevent_train = round ( tprob*100, .01);
MPRINT(EM_DIAGRAM):   percevent_train = round ( tprob*100, .01);
23655      *perc_train =round( ( N / traintotal)*100, .001);
MPRINT(EM_DIAGRAM):   *perc_train =round( ( N / traintotal)*100, .001);
23656      perc_train =round( ( N / traintotal), .01);
MPRINT(EM_DIAGRAM):   perc_train =round( ( N / traintotal), .01);
23657      if missing(perc_train) then perc_train = round( linkwidth*100, .001);
MPRINT(EM_DIAGRAM):   if missing(perc_train) then perc_train = round( linkwidth*100, .001);
23658      index = _n_;
MPRINT(EM_DIAGRAM):   index = _n_;
23659      keep NODE index tprob perc_train percevent_train
23660      ;
MPRINT(EM_DIAGRAM):   keep NODE index tprob perc_train percevent_train ;
23661      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set WORK.TEMPOUT.
NOTE: The data set WORK.TREE_TEMP has 31 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
23662      proc sort data=tree_temp;
MPRINT(EM_DIAGRAM):   proc sort data=tree_temp;
23663      by NODE;
MPRINT(EM_DIAGRAM):   by NODE;
23664      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 31 observations read from the data set WORK.TREE_TEMP.
NOTE: The data set WORK.TREE_TEMP has 31 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
23665      proc sort data=EMWS1.Clus6_TREE_PLOT;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS1.Clus6_TREE_PLOT;
23666      by NODE;
MPRINT(EM_DIAGRAM):   by NODE;
23667      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set EMWS1.CLUS6_TREE_PLOT.
NOTE: The data set EMWS1.CLUS6_TREE_PLOT has 61 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
23668      data EMWS1.Clus6_TREE_PLOT;
MPRINT(EM_DIAGRAM):   data EMWS1.Clus6_TREE_PLOT;
23669      merge EMWS1.Clus6_TREE_PLOT tree_temp;
MPRINT(EM_DIAGRAM):   merge EMWS1.Clus6_TREE_PLOT tree_temp;
23670      by NODE;
MPRINT(EM_DIAGRAM):   by NODE;
23671      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set EMWS1.CLUS6_TREE_PLOT.
NOTE: There were 31 observations read from the data set WORK.TREE_TEMP.
NOTE: The data set EMWS1.CLUS6_TREE_PLOT has 61 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
23672      proc sort data=EMWS1.Clus6_TREE_PLOT;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS1.Clus6_TREE_PLOT;
23673      by node index;
MPRINT(EM_DIAGRAM):   by node index;
23674      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 61 observations read from the data set EMWS1.CLUS6_TREE_PLOT.
NOTE: The data set EMWS1.CLUS6_TREE_PLOT has 61 observations and 17 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
23675      title9 ' ';
MPRINT(EM_DIAGRAM):    title9 ' ';
23676      title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_VariableImportance_title, NOQUOTE))";
MPRINT(EM_DIAGRAM):   title10 "Variable Importance";
23677      proc print data=EMWS1.Clus6_OUTIMPORT(where=(IMPORTANCE>0)) noobs label;
MPRINT(EM_DIAGRAM):   proc print data=EMWS1.Clus6_OUTIMPORT(where=(IMPORTANCE>0)) noobs label;
23678      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set EMWS1.CLUS6_OUTIMPORT.
      WHERE IMPORTANCE>0;
NOTE: The PROCEDURE PRINT printed page 2.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23679      title10;
MPRINT(EM_DIAGRAM):   title10;
23680      data WORK.M1JNAW6K;
MPRINT(EM_DIAGRAM):    data WORK.M1JNAW6K;
23681      set WORK.M1JNAW6K;
MPRINT(EM_DIAGRAM):   set WORK.M1JNAW6K;
23682      if role eq 'REJECTED' then role = 'INPUT';
MPRINT(EM_DIAGRAM):   if role eq 'REJECTED' then role = 'INPUT';
23683      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 10 observations read from the data set WORK.M1JNAW6K.
NOTE: The data set WORK.M1JNAW6K has 10 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23684      proc sort data=EMWS1.Clus6_OUTIMPORT out=WORK.Clus6_GRAPHVARS(keep=NAME);
MPRINT(EM_DIAGRAM):    proc sort data=EMWS1.Clus6_OUTIMPORT out=WORK.Clus6_GRAPHVARS(keep=NAME);
23685      where IMPORTANCE>0;
MPRINT(EM_DIAGRAM):   where IMPORTANCE>0;
23686      by NAME;
MPRINT(EM_DIAGRAM):   by NAME;
23687      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set EMWS1.CLUS6_OUTIMPORT.
      WHERE IMPORTANCE>0;
NOTE: The data set WORK.CLUS6_GRAPHVARS has 3 observations and 1 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
23688      proc sort data = WORK.M1JNAW6K;
MPRINT(EM_DIAGRAM):   proc sort data = WORK.M1JNAW6K;
23689      by NAME;
MPRINT(EM_DIAGRAM):   by NAME;
23690      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 10 observations read from the data set WORK.M1JNAW6K.
NOTE: The data set WORK.M1JNAW6K has 10 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
23691      data WORK.M1JNAW6K;
MPRINT(EM_DIAGRAM):   data WORK.M1JNAW6K;
23692      merge WORK.M1JNAW6K WORK.Clus6_GRAPHVARS(in=_b_);
MPRINT(EM_DIAGRAM):   merge WORK.M1JNAW6K WORK.Clus6_GRAPHVARS(in=_b_);
23693      by NAME;
MPRINT(EM_DIAGRAM):   by NAME;
23694      if _b_ or ROLE = "FREQ" or REPORT="Y" then output;
MPRINT(EM_DIAGRAM):   if _b_ or ROLE = "FREQ" or REPORT="Y" then output;
23695      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 10 observations read from the data set WORK.M1JNAW6K.
NOTE: There were 3 observations read from the data set WORK.CLUS6_GRAPHVARS.
NOTE: The data set WORK.M1JNAW6K has 3 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23696      data WORK.M1JNAW6K;
MPRINT(EM_DIAGRAM):    data WORK.M1JNAW6K;
23697      set WORK.M1JNAW6K end=_eof_ nobs=_nobs_;
MPRINT(EM_DIAGRAM):   set WORK.M1JNAW6K end=_eof_ nobs=_nobs_;
23698      output;
MPRINT(EM_DIAGRAM):   output;
23699      if _eof_ then do;
MPRINT(EM_DIAGRAM):   if _eof_ then do;
23700      name = '_SEGMENT_';
MPRINT(EM_DIAGRAM):   name = '_SEGMENT_';
23701      ROLE = 'BY';
MPRINT(EM_DIAGRAM):   ROLE = 'BY';
23702      LEVEL = 'NOMINAL';
MPRINT(EM_DIAGRAM):   LEVEL = 'NOMINAL';
23703      LABEL = 'Segment Variable';
MPRINT(EM_DIAGRAM):   LABEL = 'Segment Variable';
23704      TYPE = 'N';
MPRINT(EM_DIAGRAM):   TYPE = 'N';
23705      FORMAT = '';
MPRINT(EM_DIAGRAM):   FORMAT = '';
23706      INFORMAT = '';
MPRINT(EM_DIAGRAM):   INFORMAT = '';
23707      output;
MPRINT(EM_DIAGRAM):   output;
23708      end;
MPRINT(EM_DIAGRAM):   end;
23709      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set WORK.M1JNAW6K.
NOTE: The data set WORK.M1JNAW6K has 4 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
23710      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
23711      * Clus6: STDIZE Variables Macro ;
MPRINT(EM_DIAGRAM):   * Clus6: STDIZE Variables Macro ;
23712      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
23713      %macro stdizevar;
23714          CustMonVal IMP_MonthSal policy_time
23715      %mend stdizevar;
23716      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
23717      * Clus6: Computing Summary Statistics;
MPRINT(EM_DIAGRAM):   * Clus6: Computing Summary Statistics;
23718      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
23719      proc stdize
23720      data = EMWS1.Clus6_TRAIN
23721      out=_null_
23722      outstat=WORK.Clus6_STAT
23723      add=0 fuzz=1E-14 initial=MAD
23724      vardef=df
23725      method=STD
23726      mult=1
23727      pctlmtd=ORD_STAT pctldef=2
23728      pctlpts=(
23729      0
23730      100
23731      )
23732      ;
MPRINT(EM_DIAGRAM):   proc stdize data = EMWS1.Clus6_TRAIN out=_null_ outstat=WORK.Clus6_STAT add=0 fuzz=1E-14 initial=MAD vardef=df method=STD mult=1 pctlmtd=ORD_STAT pctldef=2 pctlpts=( 0 100 ) ;
MPRINT(EM_DIAGRAM):   var
23733      var %stdizevar;
MPRINT(STDIZEVAR):   CustMonVal IMP_MonthSal policy_time
MPRINT(EM_DIAGRAM):  ;
23734      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: INITIAL= will be ignored.
NOTE: There were 10296 observations read from the data set A2Z_INSU.A2Z_INSURANCE.
NOTE: There were 10296 observations read from the data set EMWS1.IDS_DATA.
NOTE: There were 10296 observations read from the data set EMWS1.IMPT_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS2_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS3_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.DROP2_TRAIN.
NOTE: View EMWS1.CLUS6_TRAIN.VIEW used (Total process time):
      real time           0.27 seconds
      cpu time            0.26 seconds
 
NOTE: There were 10266 observations read from the data set EMWS1.FILTER4_TRAIN.
NOTE: There were 10266 observations read from the data set EMWS1.CLUS6_TRAIN.
NOTE: The data set WORK.CLUS6_STAT has 10 observations and 4 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.29 seconds
      cpu time            0.28 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
23735      quit;
 
23736      data WORK.Clus6_MINMAX;
MPRINT(EM_DIAGRAM):    data WORK.Clus6_MINMAX;
23737      set WORK.Clus6_STAT;
MPRINT(EM_DIAGRAM):   set WORK.Clus6_STAT;
23738      where _TYPE_ in('P0','P100');
MPRINT(EM_DIAGRAM):   where _TYPE_ in('P0','P100');
23739      if _TYPE_='P0' then _TYPE_='MIN';
MPRINT(EM_DIAGRAM):   if _TYPE_='P0' then _TYPE_='MIN';
23740      else if _TYPE_='P100' then _TYPE_='MAX';
MPRINT(EM_DIAGRAM):   else if _TYPE_='P100' then _TYPE_='MAX';
23741      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK.CLUS6_STAT.
      WHERE _TYPE_ in ('P0', 'P100');
NOTE: The data set WORK.CLUS6_MINMAX has 2 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
23742      proc transpose data=WORK.Clus6_MINMAX out=WORK.Clus6_MINMAX(drop=_LABEL_ rename=(_NAME_=_VARIABLE_));
MPRINT(EM_DIAGRAM):   proc transpose data=WORK.Clus6_MINMAX out=WORK.Clus6_MINMAX(drop=_LABEL_ rename=(_NAME_=_VARIABLE_));
23743      id _TYPE_;
MPRINT(EM_DIAGRAM):   id _TYPE_;
23744      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK.CLUS6_MINMAX.
NOTE: The data set WORK.CLUS6_MINMAX has 3 observations and 3 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
23745      data WORK.Clus6_UGRID;
MPRINT(EM_DIAGRAM):    data WORK.Clus6_UGRID;
23746      set WORK.Clus6_MINMAX;
MPRINT(EM_DIAGRAM):   set WORK.Clus6_MINMAX;
23747      B1 = MIN + (1-1)*(MAX-MIN)/8;
MPRINT(EM_DIAGRAM):   B1 = MIN + (1-1)*(MAX-MIN)/8;
23748      B2 = MIN + (2-1)*(MAX-MIN)/8;
MPRINT(EM_DIAGRAM):   B2 = MIN + (2-1)*(MAX-MIN)/8;
23749      B3 = MIN + (3-1)*(MAX-MIN)/8;
MPRINT(EM_DIAGRAM):   B3 = MIN + (3-1)*(MAX-MIN)/8;
23750      B4 = MIN + (4-1)*(MAX-MIN)/8;
MPRINT(EM_DIAGRAM):   B4 = MIN + (4-1)*(MAX-MIN)/8;
23751      B5 = MIN + (5-1)*(MAX-MIN)/8;
MPRINT(EM_DIAGRAM):   B5 = MIN + (5-1)*(MAX-MIN)/8;
23752      B6 = MIN + (6-1)*(MAX-MIN)/8;
MPRINT(EM_DIAGRAM):   B6 = MIN + (6-1)*(MAX-MIN)/8;
23753      B7 = MIN + (7-1)*(MAX-MIN)/8;
MPRINT(EM_DIAGRAM):   B7 = MIN + (7-1)*(MAX-MIN)/8;
23754      B8 = MIN + (8-1)*(MAX-MIN)/8;
MPRINT(EM_DIAGRAM):   B8 = MIN + (8-1)*(MAX-MIN)/8;
23755      B9 = MIN + (9-1)*(MAX-MIN)/8;
MPRINT(EM_DIAGRAM):   B9 = MIN + (9-1)*(MAX-MIN)/8;
23756      drop MIN MAX;
MPRINT(EM_DIAGRAM):   drop MIN MAX;
23757      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set WORK.CLUS6_MINMAX.
NOTE: The data set WORK.CLUS6_UGRID has 3 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23758      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
23759      * Clus6: Creating formats for binning interval variables;
MPRINT(EM_DIAGRAM):   * Clus6: Creating formats for binning interval variables;
23760      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
23761      proc format;
MPRINT(EM_DIAGRAM):   proc format;
23762      value F1_
23763      -490.2--246.67625 = "-490.2:-246.7"
23764      -246.67625--3.15249999999997 = "-246.7:-3.152"
23765      -3.15249999999997-240.37125 = "-3.152:240.37"
23766      240.37125-483.895 = "240.37:483.9"
23767      483.895-727.41875 = "483.9:727.42"
23768      727.41875-970.9425 = "727.42:970.94"
23769      970.9425-1214.46625 = "970.94:1214.5"
23770      1214.46625-1457.99 = "1214.5:1458"
23771      ;
MPRINT(EM_DIAGRAM):   value F1_ -490.2--246.67625 = "-490.2:-246.7" -246.67625--3.15249999999997 = "-246.7:-3.152" -3.15249999999997-240.37125 = "-3.152:240.37" 240.37125-483.895 = "240.37:483.9" 483.895-727.41875 = "483.9:727.42" 727.41875-970.9425 =
"727.42:970.94" 970.9425-1214.46625 = "970.94:1214.5" 1214.46625-1457.99 = "1214.5:1458" ;
NOTE: Format F1_ has been output.
23772      value F2_
23773      333-919 = "333:919"
23774      919-1505 = "919:1505"
23775      1505-2091 = "1505:2091"
23776      2091-2677 = "2091:2677"
23777      2677-3263 = "2677:3263"
23778      3263-3849 = "3263:3849"
23779      3849-4435 = "3849:4435"
23780      4435-5021 = "4435:5021"
23781      ;
MPRINT(EM_DIAGRAM):   value F2_ 333-919 = "333:919" 919-1505 = "919:1505" 1505-2091 = "1505:2091" 2091-2677 = "2091:2677" 2677-3263 = "2677:3263" 3263-3849 = "3263:3849" 3849-4435 = "3849:4435" 4435-5021 = "4435:5021" ;
NOTE: Format F2_ has been output.
23782      value F3_
23783      18-21 = "18:21"
23784      21-24 = "21:24"
23785      24-27 = "24:27"
23786      27-30 = "27:30"
23787      30-33 = "30:33"
23788      33-36 = "33:36"
23789      36-39 = "36:39"
23790      39-42 = "39:42"
23791      ;
MPRINT(EM_DIAGRAM):   value F3_ 18-21 = "18:21" 21-24 = "21:24" 24-27 = "24:27" 27-30 = "27:30" 30-33 = "30:33" 33-36 = "33:36" 36-39 = "36:39" 39-42 = "39:42" ;
NOTE: Format F3_ has been output.
MPRINT(EM_DIAGRAM):   run;
23792      run;
 
NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23793      ods listing close;
MPRINT(EM_DIAGRAM):    ods listing close;
23794      ods output crosstabfreqs=WORK.TEMPFREQ;
MPRINT(EM_DIAGRAM):   ods output crosstabfreqs=WORK.TEMPFREQ;
23795      proc freq data = EMWS1.Clus6_TRAIN order=formatted addnames;
MPRINT(EM_DIAGRAM):   proc freq data = EMWS1.Clus6_TRAIN order=formatted addnames;
23796      table CustMonVal * _SEGMENT_ / missing;
MPRINT(EM_DIAGRAM):   table CustMonVal * _SEGMENT_ / missing;
23797      table IMP_MonthSal * _SEGMENT_ / missing;
MPRINT(EM_DIAGRAM):   table IMP_MonthSal * _SEGMENT_ / missing;
23798      table policy_time * _SEGMENT_ / missing;
MPRINT(EM_DIAGRAM):   table policy_time * _SEGMENT_ / missing;
23799      format CUSTMONVAL F1_.;
MPRINT(EM_DIAGRAM):   format CUSTMONVAL F1_.;
23800      format IMP_MONTHSAL F2_.;
MPRINT(EM_DIAGRAM):   format IMP_MONTHSAL F2_.;
23801      format POLICY_TIME F3_.;
MPRINT(EM_DIAGRAM):   format POLICY_TIME F3_.;
23802      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 10296 observations read from the data set A2Z_INSU.A2Z_INSURANCE.
NOTE: There were 10296 observations read from the data set EMWS1.IDS_DATA.
NOTE: There were 10296 observations read from the data set EMWS1.IMPT_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS2_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.TRANS3_TRAIN.
NOTE: There were 10296 observations read from the data set EMWS1.DROP2_TRAIN.
NOTE: View EMWS1.CLUS6_TRAIN.VIEW used (Total process time):
      real time           0.26 seconds
      cpu time            0.25 seconds
 
NOTE: There were 10266 observations read from the data set EMWS1.FILTER4_TRAIN.
NOTE: The data set WORK.TEMPFREQ has 108 observations and 14 variables.
NOTE: There were 10266 observations read from the data set EMWS1.CLUS6_TRAIN.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.30 seconds
      cpu time            0.31 seconds
 
 
MPRINT(EM_DIAGRAM):   quit;
23803      quit;
23804      ods listing;
MPRINT(EM_DIAGRAM):   ods listing;
23805      data EMWS1.Clus6_PROFILE(keep=_VARIABLE_ _SEGMENT_ TYPE COUNT PERCENT _X_ _XLABEL_);
MPRINT(EM_DIAGRAM):    data EMWS1.Clus6_PROFILE(keep=_VARIABLE_ _SEGMENT_ TYPE COUNT PERCENT _X_ _XLABEL_);
23806      label _VARIABLE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel, NOQUOTE))" _SEGMENT_ = "Segment Variable" Type = "%sysfunc(sasmsg(sashelp.dmine, rpt_type_vlabel,         NOQUOTE))" _X_ =
23807         "%sysfunc(sasmsg(sashelp.dmine, rpt_numValue_vlabel, NOQUOTE))" _XLABEL_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_fmtValue_vlabel ,    NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel,        NOQUOTE))" PERCENT =
23808         "%sysfunc(sasmsg(sashelp.dmine, rpt_percent_vlabel,      NOQUOTE))";
MPRINT(EM_DIAGRAM):   label _VARIABLE_ = "Variable" _SEGMENT_ = "Segment Variable" Type = "Type" _X_ = "Numeric Value" _XLABEL_ = "Formatted Value" COUNT = "Frequency Count" PERCENT = "Percent";
23809      dsid = open("WORK.TEMPFREQ");
MPRINT(EM_DIAGRAM):   dsid = open("WORK.TEMPFREQ");
23810      varnum = varnum(dsid, 'ROWVARIABLE');
MPRINT(EM_DIAGRAM):   varnum = varnum(dsid, 'ROWVARIABLE');
23811      freqnum = varnum(dsid, 'FREQUENCY');
MPRINT(EM_DIAGRAM):   freqnum = varnum(dsid, 'FREQUENCY');
23812      pvarnum = varnum(dsid, 'PERCENT');
MPRINT(EM_DIAGRAM):   pvarnum = varnum(dsid, 'PERCENT');
23813      typenum = varnum(dsid, '_TYPE_');
MPRINT(EM_DIAGRAM):   typenum = varnum(dsid, '_TYPE_');
23814      bynum = varnum(dsid, "_SEGMENT_");
MPRINT(EM_DIAGRAM):   bynum = varnum(dsid, "_SEGMENT_");
23815      length varformat _VARIABLE_ $32 _XLABEL_ $32 TYPE $1;
MPRINT(EM_DIAGRAM):   length varformat _VARIABLE_ $32 _XLABEL_ $32 TYPE $1;
23816      do while(^fetch(dsid));
MPRINT(EM_DIAGRAM):   do while(^fetch(dsid));
23817      count = getvarn(dsid, freqnum);
MPRINT(EM_DIAGRAM):   count = getvarn(dsid, freqnum);
23818      percent = getvarn(dsid, pvarnum);
MPRINT(EM_DIAGRAM):   percent = getvarn(dsid, pvarnum);
23819      _VARIABLE_ = strip(getvarc(dsid, varnum));
MPRINT(EM_DIAGRAM):   _VARIABLE_ = strip(getvarc(dsid, varnum));
23820      varblnum = varnum(dsid, _VARIABLE_);
MPRINT(EM_DIAGRAM):   varblnum = varnum(dsid, _VARIABLE_);
23821      _SEGMENT_ = getvarn(dsid, bynum);
MPRINT(EM_DIAGRAM):   _SEGMENT_ = getvarn(dsid, bynum);
23822      type = vartype(dsid, varblnum);
MPRINT(EM_DIAGRAM):   type = vartype(dsid, varblnum);
23823      varformat = varfmt(dsid, varblnum);
MPRINT(EM_DIAGRAM):   varformat = varfmt(dsid, varblnum);
23824      if varformat eq '' then varformat = 'best12.';
MPRINT(EM_DIAGRAM):   if varformat eq '' then varformat = 'best12.';
23825      _X_=.;
MPRINT(EM_DIAGRAM):   _X_=.;
23826      if type = 'N' then do;
MPRINT(EM_DIAGRAM):   if type = 'N' then do;
23827      _X_ = getvarn(dsid, varblnum);
MPRINT(EM_DIAGRAM):   _X_ = getvarn(dsid, varblnum);
23828      _XLABEL_ = left(putn(_X_, varformat));
MPRINT(EM_DIAGRAM):   _XLABEL_ = left(putn(_X_, varformat));
23829      end;
MPRINT(EM_DIAGRAM):   end;
23830      else _XLABEL_ = getvarc(dsid, varblnum);
MPRINT(EM_DIAGRAM):   else _XLABEL_ = getvarc(dsid, varblnum);
23831      if getvarc(dsid, typenum) = '11' then output;
MPRINT(EM_DIAGRAM):   if getvarc(dsid, typenum) = '11' then output;
23832      end;
MPRINT(EM_DIAGRAM):   end;
23833      dsid = close(dsid);
MPRINT(EM_DIAGRAM):   dsid = close(dsid);
23834      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: The data set EMWS1.CLUS6_PROFILE has 72 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
23835      proc sort data=EMWS1.Clus6_PROFILE NOTHREADS;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS1.Clus6_PROFILE NOTHREADS;
23836      by _VARIABLE_ _SEGMENT_;
MPRINT(EM_DIAGRAM):   by _VARIABLE_ _SEGMENT_;
23837      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 72 observations read from the data set EMWS1.CLUS6_PROFILE.
NOTE: The data set EMWS1.CLUS6_PROFILE has 72 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23838      proc means data=EMWS1.Clus6_PROFILE noprint missing NWAY;
MPRINT(EM_DIAGRAM):   proc means data=EMWS1.Clus6_PROFILE noprint missing NWAY;
23839      class _VARIABLE_ _SEGMENT_;
MPRINT(EM_DIAGRAM):   class _VARIABLE_ _SEGMENT_;
23840      var COUNT;
MPRINT(EM_DIAGRAM):   var COUNT;
23841      output out=WORK.Clus6_STATCOUNT(keep=_SEGMENT_ _VARIABLE_ SUM) SUM=SUM;
MPRINT(EM_DIAGRAM):   output out=WORK.Clus6_STATCOUNT(keep=_SEGMENT_ _VARIABLE_ SUM) SUM=SUM;
23842      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 72 observations read from the data set EMWS1.CLUS6_PROFILE.
NOTE: The data set WORK.CLUS6_STATCOUNT has 9 observations and 3 variables.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23843      proc sort data=WORK.Clus6_STATCOUNT NOTHREADS;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.Clus6_STATCOUNT NOTHREADS;
23844      by _VARIABLE_ _SEGMENT_;
MPRINT(EM_DIAGRAM):   by _VARIABLE_ _SEGMENT_;
23845      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 9 observations read from the data set WORK.CLUS6_STATCOUNT.
NOTE: The data set WORK.CLUS6_STATCOUNT has 9 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23846      data EMWS1.Clus6_PROFILE(drop=SUM);
MPRINT(EM_DIAGRAM):   data EMWS1.Clus6_PROFILE(drop=SUM);
23847      label BYPERCENT= "%sysfunc(sasmsg(sashelp.dmine, rpt_percent_vlabel, NOQUOTE, _SEGMENT_))";
MPRINT(EM_DIAGRAM):   label BYPERCENT= "Percent";
23848      merge EMWS1.Clus6_PROFILE WORK.Clus6_STATCOUNT;
MPRINT(EM_DIAGRAM):   merge EMWS1.Clus6_PROFILE WORK.Clus6_STATCOUNT;
23849      by _VARIABLE_ _SEGMENT_;
MPRINT(EM_DIAGRAM):   by _VARIABLE_ _SEGMENT_;
23850      if SUM ne . then BYPERCENT = 100*COUNT/SUM;
MPRINT(EM_DIAGRAM):   if SUM ne . then BYPERCENT = 100*COUNT/SUM;
23851      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 72 observations read from the data set EMWS1.CLUS6_PROFILE.
NOTE: There were 9 observations read from the data set WORK.CLUS6_STATCOUNT.
NOTE: The data set EMWS1.CLUS6_PROFILE has 72 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23852      proc sort data=EMWS1.Clus6_PROFILE NOTHREADS;
MPRINT(EM_DIAGRAM):    proc sort data=EMWS1.Clus6_PROFILE NOTHREADS;
23853      by _VARIABLE_;
MPRINT(EM_DIAGRAM):   by _VARIABLE_;
23854      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 72 observations read from the data set EMWS1.CLUS6_PROFILE.
NOTE: The data set EMWS1.CLUS6_PROFILE has 72 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
23855      proc sort data=WORK.M1JNAW6K;
MPRINT(EM_DIAGRAM):   proc sort data=WORK.M1JNAW6K;
23856      by Name;
MPRINT(EM_DIAGRAM):   by Name;
23857      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK.M1JNAW6K.
NOTE: The data set WORK.M1JNAW6K has 4 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
23858      data EMWS1.Clus6_PROFILE;
MPRINT(EM_DIAGRAM):   data EMWS1.Clus6_PROFILE;
23859      merge EMWS1.Clus6_PROFILE(in=_a) WORK.M1JNAW6K(keep=Name Label Role rename=(Name=_Variable_ Label=_Label_));
MPRINT(EM_DIAGRAM):   merge EMWS1.Clus6_PROFILE(in=_a) WORK.M1JNAW6K(keep=Name Label Role rename=(Name=_Variable_ Label=_Label_));
23860      by _Variable_;
MPRINT(EM_DIAGRAM):   by _Variable_;
23861      label Role = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel ,  NOQUOTE))";
MPRINT(EM_DIAGRAM):   label Role = "Role";
23862      label Label = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel , NOQUOTE))";
MPRINT(EM_DIAGRAM):   label Label = "Label";
23863      if _a then output;
MPRINT(EM_DIAGRAM):   if _a then output;
23864      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: Variable Label is uninitialized.
WARNING: Multiple lengths were specified for the BY variable _VARIABLE_ by input data sets. This might cause unexpected results.
NOTE: There were 72 observations read from the data set EMWS1.CLUS6_PROFILE.
NOTE: There were 4 observations read from the data set WORK.M1JNAW6K.
NOTE: The data set EMWS1.CLUS6_PROFILE has 72 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
23865      proc sort data=EMWS1.Clus6_PROFILE;
MPRINT(EM_DIAGRAM):    proc sort data=EMWS1.Clus6_PROFILE;
23866      by _SEGMENT_ _VARIABLE_ _X_;
MPRINT(EM_DIAGRAM):   by _SEGMENT_ _VARIABLE_ _X_;
23867      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 72 observations read from the data set EMWS1.CLUS6_PROFILE.
NOTE: The data set EMWS1.CLUS6_PROFILE has 72 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
23868      data EMWS1.Clus6_PROFILE(rename=(_VARIABLE_=Variable _X_=NumericValue _XLABEL_=FmtValue));
MPRINT(EM_DIAGRAM):   data EMWS1.Clus6_PROFILE(rename=(_VARIABLE_=Variable _X_=NumericValue _XLABEL_=FmtValue));
23869      set EMWS1.Clus6_PROFILE;
MPRINT(EM_DIAGRAM):   set EMWS1.Clus6_PROFILE;
23870      retain orderedValue 0;
MPRINT(EM_DIAGRAM):   retain orderedValue 0;
23871      label OrderedValue = "%sysfunc(sasmsg(sashelp.dmine, rpt_OrderedValue_vlabel, NOQUOTE))";
MPRINT(EM_DIAGRAM):   label OrderedValue = "Ordered Values";
23872      by _SEGMENT_ _VARIABLE_;
MPRINT(EM_DIAGRAM):   by _SEGMENT_ _VARIABLE_;
23873      if first._variable_ then orderedValue=1;
MPRINT(EM_DIAGRAM):   if first._variable_ then orderedValue=1;
23874      else orderedValue+1;
MPRINT(EM_DIAGRAM):   else orderedValue+1;
23875      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 72 observations read from the data set EMWS1.CLUS6_PROFILE.
NOTE: The data set EMWS1.CLUS6_PROFILE has 72 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
23876      proc transpose data=EMWS1.Clus6_OUTVAR out=WORK.Clus6_OUTVAR(where=(COL1 ^in('IMPUTED','OMITTED')));
MPRINT(EM_DIAGRAM):    proc transpose data=EMWS1.Clus6_OUTVAR out=WORK.Clus6_OUTVAR(where=(COL1 ^in('IMPUTED','OMITTED')));
23877      var CustMonVal--policy_time;
MPRINT(EM_DIAGRAM):   var CustMonVal--policy_time;
23878      where _TYPE_ in('TYPE' 'VARIABLE');
MPRINT(EM_DIAGRAM):   where _TYPE_ in('TYPE' 'VARIABLE');
23879      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set EMWS1.CLUS6_OUTVAR.
      WHERE _TYPE_ in ('TYPE', 'VARIABLE');
NOTE: The data set WORK.CLUS6_OUTVAR has 3 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
23880      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------* ;
23881      * Clus6: DMVQ Variables;
MPRINT(EM_DIAGRAM):   * Clus6: DMVQ Variables;
23882      *------------------------------------------------------------* ;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------* ;
23883      %macro dmvqvars;
23884          CustMonVal IMP_MonthSal policy_time
23885      %mend ;
23886
23887
 
23888      data WORK.Clus6_temp;
MPRINT(EM_DIAGRAM):    data WORK.Clus6_temp;
23889      set EMWS1.Clus6_OUTMEAN;
MPRINT(EM_DIAGRAM):   set EMWS1.Clus6_OUTMEAN;
23890      _idvar_=left(put(_SEGMENT_,4.));
MPRINT(EM_DIAGRAM):   _idvar_=left(put(_SEGMENT_,4.));
23891      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set EMWS1.CLUS6_OUTMEAN.
NOTE: The data set WORK.CLUS6_TEMP has 3 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
23892      proc distance data=WORK.Clus6_temp out=EMWS1.Clus6_DISTANCE method=l(2) shape=square;
MPRINT(EM_DIAGRAM):   proc distance data=WORK.Clus6_temp out=EMWS1.Clus6_DISTANCE method=l(2) shape=square;
23893      id _idvar_;
MPRINT(EM_DIAGRAM):   id _idvar_;
23894      var interval(%dmvqvars);
MPRINT(EM_DIAGRAM):   var interval(
MPRINT(DMVQVARS):  CustMonVal IMP_MonthSal policy_time
MPRINT(EM_DIAGRAM):  );
23895      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: The data set EMWS1.CLUS6_DISTANCE has 3 observations and 4 variables.
NOTE: PROCEDURE DISTANCE used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
23896      proc datasets lib=EMWS1 nolist;
MPRINT(EM_DIAGRAM):    proc datasets lib=EMWS1 nolist;
23897      modify Clus6_DISTANCE;
MPRINT(EM_DIAGRAM):   modify Clus6_DISTANCE;
23898      rename _idvar_=_SEGMENT_;
MPRINT(EM_DIAGRAM):   rename _idvar_=_SEGMENT_;
NOTE: Renaming variable _idvar_ to _SEGMENT_.
MPRINT(EM_DIAGRAM):   run;
23899      run;
 
NOTE: MODIFY was successful for EMWS1.CLUS6_DISTANCE.DATA.
23900      quit;
MPRINT(EM_DIAGRAM):   quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
 
 
23901      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
23902      * Clus6: Creating data set for Input Mean report;
MPRINT(EM_DIAGRAM):   * Clus6: Creating data set for Input Mean report;
23903      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
23904      data temp(drop=_type_ over_all);
MPRINT(EM_DIAGRAM):   data temp(drop=_type_ over_all);
23905      set EMWS1.Clus6_OUTSTAT;
MPRINT(EM_DIAGRAM):   set EMWS1.Clus6_OUTSTAT;
23906      where _type_ in('DMDB_MEAN', 'CLUS_MEAN');
MPRINT(EM_DIAGRAM):   where _type_ in('DMDB_MEAN', 'CLUS_MEAN');
23907      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set EMWS1.CLUS6_OUTSTAT.
      WHERE _type_ in ('CLUS_MEAN', 'DMDB_MEAN');
NOTE: The data set WORK.TEMP has 4 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
23908      proc sort data=temp;
MPRINT(EM_DIAGRAM):   proc sort data=temp;
23909      by _SEGMENT_;
MPRINT(EM_DIAGRAM):   by _SEGMENT_;
23910      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 4 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23911      proc stdize data=temp out=stdtemp pctlpts=0 100 outstat=stat;
MPRINT(EM_DIAGRAM):   proc stdize data=temp out=stdtemp pctlpts=0 100 outstat=stat;
23912      var CustMonVal--policy_time;
MPRINT(EM_DIAGRAM):   var CustMonVal--policy_time;
23913      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.STDTEMP has 4 observations and 4 variables.
NOTE: The data set WORK.STAT has 10 observations and 4 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
 
 
23914      proc transpose data=stat out=tstat(rename=(COL1=MEAN COL2=STD COL3=MIN COL4=MAX));
MPRINT(EM_DIAGRAM):   proc transpose data=stat out=tstat(rename=(COL1=MEAN COL2=STD COL3=MIN COL4=MAX));
23915      where _type_ in ('LOCATION', 'SCALE','P0', 'P100');
MPRINT(EM_DIAGRAM):   where _type_ in ('LOCATION', 'SCALE','P0', 'P100');
23916      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK.STAT.
      WHERE _type_ in ('LOCATION', 'P0', 'P100', 'SCALE');
NOTE: The data set WORK.TSTAT has 3 observations and 6 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
 
 
23917      data tstat( rename=(_NAME_=NAME) keep=_NAME_ cv stdmin stdmax);
MPRINT(EM_DIAGRAM):   data tstat( rename=(_NAME_=NAME) keep=_NAME_ cv stdmin stdmax);
23918      set tstat;
MPRINT(EM_DIAGRAM):   set tstat;
23919      if std ^in (0, .) then do;
MPRINT(EM_DIAGRAM):   if std ^in (0, .) then do;
23920      stdmin = abs((min-mean)/std);
MPRINT(EM_DIAGRAM):   stdmin = abs((min-mean)/std);
23921      stdmax = abs((max-mean)/std);
MPRINT(EM_DIAGRAM):   stdmax = abs((max-mean)/std);
23922      end;
MPRINT(EM_DIAGRAM):   end;
23923      if mean ^in(0, .) then cv = std/mean;
MPRINT(EM_DIAGRAM):   if mean ^in(0, .) then cv = std/mean;
23924      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTAT has 3 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23925      proc sort data=tstat;
MPRINT(EM_DIAGRAM):   proc sort data=tstat;
23926      by NAME;
MPRINT(EM_DIAGRAM):   by NAME;
23927      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTAT has 3 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
23928      proc transpose data=stdtemp out=tstdtemp(rename=(_NAME_=NAME _LABEL_=LABEL COL1=MEAN));
MPRINT(EM_DIAGRAM):   proc transpose data=stdtemp out=tstdtemp(rename=(_NAME_=NAME _LABEL_=LABEL COL1=MEAN));
23929      by _SEGMENT_;
MPRINT(EM_DIAGRAM):   by _SEGMENT_;
23930      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 4 observations read from the data set WORK.STDTEMP.
NOTE: The data set WORK.TSTDTEMP has 12 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
 
23931      proc sort data=tstdtemp;
MPRINT(EM_DIAGRAM):   proc sort data=tstdtemp;
23932      by NAME;
MPRINT(EM_DIAGRAM):   by NAME;
23933      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 12 observations read from the data set WORK.TSTDTEMP.
NOTE: The data set WORK.TSTDTEMP has 12 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23934      data tstdtemp;
MPRINT(EM_DIAGRAM):   data tstdtemp;
23935      merge tstdtemp tstat;
MPRINT(EM_DIAGRAM):   merge tstdtemp tstat;
23936      by NAME;
MPRINT(EM_DIAGRAM):   by NAME;
23937      STDMEAN = (MEAN + stdmin)/(stdmin + stdmax);
MPRINT(EM_DIAGRAM):   STDMEAN = (MEAN + stdmin)/(stdmin + stdmax);
23938      drop stdmin stdmax mean;
MPRINT(EM_DIAGRAM):   drop stdmin stdmax mean;
23939      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 12 observations read from the data set WORK.TSTDTEMP.
NOTE: There were 3 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTDTEMP has 12 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23940      proc transpose data=EMWS1.Clus6_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME VARIABLE=INPUT));
MPRINT(EM_DIAGRAM):   proc transpose data=EMWS1.Clus6_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME VARIABLE=INPUT));
23941      var CustMonVal--policy_time;
MPRINT(EM_DIAGRAM):   var CustMonVal--policy_time;
23942      id _type_;
MPRINT(EM_DIAGRAM):   id _type_;
23943      where _type_ = 'VARIABLE';
MPRINT(EM_DIAGRAM):   where _type_ = 'VARIABLE';
23944      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1 observations read from the data set EMWS1.CLUS6_OUTVAR.
      WHERE _type_='VARIABLE';
NOTE: The data set WORK.TEMPVAR has 3 observations and 2 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
 
 
23945      proc sort data=tempVar;
MPRINT(EM_DIAGRAM):   proc sort data=tempVar;
23946      by NAME;
MPRINT(EM_DIAGRAM):   by NAME;
23947      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 3 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23948      data EMWS1.Clus6_INPUTMEAN(rename=(NAME=VARIABLE));
MPRINT(EM_DIAGRAM):   data EMWS1.Clus6_INPUTMEAN(rename=(NAME=VARIABLE));
23949      Length _SEGMENT_CHAR_ $7;
MPRINT(EM_DIAGRAM):   Length _SEGMENT_CHAR_ $7;
23950      label _SEGMENT_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentName_vlabel,  NOQUOTE))" _SEGMENT_CHAR_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentId_vlabel,    NOQUOTE))" NAME = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel,     NOQUOTE))"
23950    !  INPUT =
23951         "%sysfunc(sasmsg(sashelp.dmine, rpt_input_vlabel,        NOQUOTE))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, rpt_label_vlabel,        NOQUOTE))" CV = "%sysfunc(sasmsg(sashelp.dmine, rpt_cv_vlabel,           NOQUOTE))" STDMEAN =
23952         "%sysfunc(sasmsg(sashelp.dmine, rpt_normmean_vlabel,     NOQUOTE))";
MPRINT(EM_DIAGRAM):   label _SEGMENT_ = "Segment Name" _SEGMENT_CHAR_ = "Segment Id" NAME = "Variable" INPUT = "Input" LABEL = "Label" CV = "Coefficient of Variation" STDMEAN = "Normalized Mean";
23953      merge tempvar tstdtemp;
MPRINT(EM_DIAGRAM):   merge tempvar tstdtemp;
23954      by NAME;
MPRINT(EM_DIAGRAM):   by NAME;
23955      if LABEL='' then LABEL=NAME;
MPRINT(EM_DIAGRAM):   if LABEL='' then LABEL=NAME;
23956      _SEGMENT_CHAR_ = strip(put(_SEGMENT_, best.));
MPRINT(EM_DIAGRAM):   _SEGMENT_CHAR_ = strip(put(_SEGMENT_, best.));
23957      if _SEGMENT_ = . then _SEGMENT_CHAR_='Overall';
MPRINT(EM_DIAGRAM):   if _SEGMENT_ = . then _SEGMENT_CHAR_='Overall';
23958      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set WORK.TEMPVAR.
NOTE: There were 12 observations read from the data set WORK.TSTDTEMP.
NOTE: The data set EMWS1.CLUS6_INPUTMEAN has 12 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
23959      proc sort data=EMWS1.Clus6_INPUTMEAN;
MPRINT(EM_DIAGRAM):   proc sort data=EMWS1.Clus6_INPUTMEAN;
23960      by descending cv;
MPRINT(EM_DIAGRAM):   by descending cv;
23961      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 12 observations read from the data set EMWS1.CLUS6_INPUTMEAN.
NOTE: The data set EMWS1.CLUS6_INPUTMEAN has 12 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
23962      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):    *------------------------------------------------------------*;
23963      * Clus6: Determining the important variables;
MPRINT(EM_DIAGRAM):   * Clus6: Determining the important variables;
23964      *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
 
23965      %let _nobs = 0;
23966      data keepvars(rename=(NAME=INPUT));
MPRINT(EM_DIAGRAM):    data keepvars(rename=(NAME=INPUT));
23967      set EMWS1.Clus6_OUTIMPORT(where=(IMPORTANCE>0.5)) end=eof;
MPRINT(EM_DIAGRAM):   set EMWS1.Clus6_OUTIMPORT(where=(IMPORTANCE>0.5)) end=eof;
23968      if eof then call symput('_nobs', strip(put(_N_, best.)));
MPRINT(EM_DIAGRAM):   if eof then call symput('_nobs', strip(put(_N_, best.)));
23969      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set EMWS1.CLUS6_OUTIMPORT.
      WHERE IMPORTANCE>0.5;
NOTE: The data set WORK.KEEPVARS has 2 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
23970      proc transpose data=EMWS1.Clus6_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME VARIABLE=INPUT));
MPRINT(EM_DIAGRAM):    proc transpose data=EMWS1.Clus6_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME VARIABLE=INPUT));
23971      var CustMonVal--policy_time;
MPRINT(EM_DIAGRAM):   var CustMonVal--policy_time;
23972      id _type_;
MPRINT(EM_DIAGRAM):   id _type_;
23973      where _type_ = 'VARIABLE';
MPRINT(EM_DIAGRAM):   where _type_ = 'VARIABLE';
23974      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 1 observations read from the data set EMWS1.CLUS6_OUTVAR.
      WHERE _type_='VARIABLE';
NOTE: The data set WORK.TEMPVAR has 3 observations and 2 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
 
 
23975      proc sort data=keepvars;
MPRINT(EM_DIAGRAM):   proc sort data=keepvars;
23976      by INPUT;
MPRINT(EM_DIAGRAM):   by INPUT;
23977      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK.KEEPVARS.
NOTE: The data set WORK.KEEPVARS has 2 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23978      proc sort data=tempvar;
MPRINT(EM_DIAGRAM):   proc sort data=tempvar;
23979      by INPUT;
MPRINT(EM_DIAGRAM):   by INPUT;
23980      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 3 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23981      data vars;
MPRINT(EM_DIAGRAM):   data vars;
23982      merge tempvar keepvars(in=b);
MPRINT(EM_DIAGRAM):   merge tempvar keepvars(in=b);
23983      by INPUT;
MPRINT(EM_DIAGRAM):   by INPUT;
23984      if b then output;
MPRINT(EM_DIAGRAM):   if b then output;
23985      run;
MPRINT(EM_DIAGRAM):   run;
 
WARNING: Multiple lengths were specified for the BY variable INPUT by input data sets. This might cause unexpected results.
NOTE: There were 3 observations read from the data set WORK.TEMPVAR.
NOTE: There were 2 observations read from the data set WORK.KEEPVARS.
NOTE: The data set WORK.VARS has 2 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
23986      proc sort data=vars;
MPRINT(EM_DIAGRAM):   proc sort data=vars;
23987      by descending importance;
MPRINT(EM_DIAGRAM):   by descending importance;
23988      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK.VARS.
NOTE: The data set WORK.VARS has 2 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
23989      data _null_;
MPRINT(EM_DIAGRAM):    data _null_;
23990      set vars;
MPRINT(EM_DIAGRAM):   set vars;
23991      if _N_=1 then call symput('CLUS_PROFVARS', strip(NAME));
MPRINT(EM_DIAGRAM):   if _N_=1 then call symput('CLUS_PROFVARS', strip(NAME));
23992      else call symput('CLUS_PROFVARS',symget('CLUS_PROFVARS')!!' '!!strip(NAME));
MPRINT(EM_DIAGRAM):   else call symput('CLUS_PROFVARS',symget('CLUS_PROFVARS')!!' '!!strip(NAME));
23993      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 2 observations read from the data set WORK.VARS.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
MPRINT(EM_DIAGRAM):   * mergeVarMeansandClusLabel;
MPRINT(EM_DIAGRAM):   *------------------------------------------------------------*;
23994      *------------------------------------------------------------*;
23995      * mergeVarMeansandClusLabel;
23996      *------------------------------------------------------------*;
23997      data temp(keep=_SEGMENT_ &CLUS_PROFVARS);
MPRINT(EM_DIAGRAM):   data temp(keep=_SEGMENT_ CustMonVal IMP_MonthSal);
23998      length _SEGMENT_ &CLUS_PROFVARS 8;
MPRINT(EM_DIAGRAM):   length _SEGMENT_ CustMonVal IMP_MonthSal 8;
23999      set EMWS1.Clus6_OUTSTAT;
MPRINT(EM_DIAGRAM):   set EMWS1.Clus6_OUTSTAT;
24000      where _type_ ='CLUS_MEAN';
MPRINT(EM_DIAGRAM):   where _type_ ='CLUS_MEAN';
24001      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set EMWS1.CLUS6_OUTSTAT.
      WHERE _type_='CLUS_MEAN';
NOTE: The data set WORK.TEMP has 3 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
24002      proc sort data=temp;
MPRINT(EM_DIAGRAM):   proc sort data=temp;
24003      by _SEGMENT_;
MPRINT(EM_DIAGRAM):   by _SEGMENT_;
24004      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 3 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
24005      data EMWS1.Clus6_LABEL;
MPRINT(EM_DIAGRAM):   data EMWS1.Clus6_LABEL;
24006      merge EMWS1.Clus6_LABEL(keep=_SEGMENT_ LABEL) temp;
MPRINT(EM_DIAGRAM):   merge EMWS1.Clus6_LABEL(keep=_SEGMENT_ LABEL) temp;
24007      by _SEGMENT_;
MPRINT(EM_DIAGRAM):   by _SEGMENT_;
24008      run;
MPRINT(EM_DIAGRAM):   run;
 
NOTE: There were 3 observations read from the data set EMWS1.CLUS6_LABEL.
NOTE: There were 3 observations read from the data set WORK.TEMP.
NOTE: The data set EMWS1.CLUS6_LABEL has 3 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
MPRINT(EM_DIAGRAM):    proc printto;
MPRINT(EM_DIAGRAM):   run;
